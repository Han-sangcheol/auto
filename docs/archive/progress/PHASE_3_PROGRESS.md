# Phase 3: ë§¤ë§¤ ì—”ì§„ ë¦¬íŒ©í† ë§ - ì§„í–‰ ìƒí™©

## âœ… ì™„ë£Œëœ ì‘ì—… (2025-10-24)

### 1. Indicators ëª¨ë“ˆ í†µí•© âœ…
**íŒŒì¼**: `trading-engine/engine/indicators/technical.py`

ê¸°ì¡´ `auto_trading/indicators.py`ë¥¼ ìƒˆ êµ¬ì¡°ë¡œ ì´ë™ ë° ìµœì í™”

**êµ¬í˜„ëœ ì§€í‘œ**:
- SMA (Simple Moving Average)
- EMA (Exponential Moving Average)
- RSI (Relative Strength Index)
- MACD (Moving Average Convergence Divergence)
- Bollinger Bands

### 2. KiwoomBroker ì™„ì„± âœ…
**íŒŒì¼**: `trading-engine/engine/brokers/kiwoom.py`

ê¸°ì¡´ `auto_trading/kiwoom_api.py` (678ì¤„)ë¥¼ BaseBroker ì¸í„°í˜ì´ìŠ¤ë¡œ ë˜í•‘

**ì£¼ìš” ê¸°ëŠ¥**:
- âœ… ë¡œê·¸ì¸ ì²˜ë¦¬
- âœ… ê³„ì¢Œ ì •ë³´ ì¡°íšŒ
- âœ… ì”ê³  ì¡°íšŒ
- âœ… ë³´ìœ  ì¢…ëª© ì¡°íšŒ
- âœ… ë§¤ìˆ˜/ë§¤ë„ ì£¼ë¬¸
- âœ… ì‹¤ì‹œê°„ ì‹œì„¸ ë“±ë¡
- âœ… ê±°ë˜ëŒ€ê¸ˆ ìƒìœ„ ì¢…ëª© ì¡°íšŒ
- âœ… TR ë°ì´í„° ìˆ˜ì‹  ì²˜ë¦¬
- âœ… ì‹¤ì‹œê°„ ë°ì´í„° ì½œë°±
- âœ… API í˜¸ì¶œ ì œí•œ ê´€ë¦¬ (ì´ˆë‹¹ 5ê±´)

**ê°œì„  ì‚¬í•­**:
- BaseBroker ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ìœ¼ë¡œ í™•ì¥ì„± í™•ë³´
- loguru ë¡œê±° í†µí•©
- ì„¤ì • ê°ì²´ ë¶„ë¦¬ (config íŒŒë¼ë¯¸í„°)

### 3. Risk Manager í†µí•© âœ…
**íŒŒì¼**: `trading-engine/engine/core/risk_manager.py`

ê¸°ì¡´ `auto_trading/risk_manager.py`ë¥¼ ìƒˆ êµ¬ì¡°ë¡œ ì´ë™

**ì£¼ìš” ê¸°ëŠ¥**:
- âœ… í¬ì§€ì…˜ ê´€ë¦¬ (Position í´ë˜ìŠ¤)
- âœ… ê±°ë˜ ê¸°ë¡ (Trade í´ë˜ìŠ¤)
- âœ… ì†ì ˆë§¤/ìµì ˆë§¤ ìë™ í™•ì¸
- âœ… í¬ì§€ì…˜ ì‚¬ì´ì§• ê³„ì‚°
- âœ… ì¼ì¼ ì†ì‹¤ í•œë„ ì²´í¬
- âœ… ì‹ ê·œ í¬ì§€ì…˜ ê²€ì¦
- âœ… í†µê³„ ì •ë³´ ì œê³µ

### 4. ì „ëµ ëª¨ë“ˆí™” ë° ì¶”ìƒí™” âœ…
**íŒŒì¼**: `trading-engine/engine/strategies/`

ê¸°ì¡´ `auto_trading/strategies.py`ë¥¼ ê°œë³„ íŒŒì¼ë¡œ ë¶„ë¦¬

#### 4.1 ì „ëµ ì¶”ìƒ í´ë˜ìŠ¤ âœ…
**íŒŒì¼**: `strategies/base.py`

- `BaseStrategy` ì¶”ìƒ í´ë˜ìŠ¤ ì •ì˜
- `SignalType` Enum (BUY, SELL, HOLD)
- ì „ëµ í™œì„±í™”/ë¹„í™œì„±í™” ê¸°ëŠ¥
- `generate_signal()` ì¶”ìƒ ë©”ì„œë“œ
- `get_signal_strength()` ê¸°ë³¸ êµ¬í˜„

#### 4.2 ê°œë³„ ì „ëµ íŒŒì¼ âœ…

**`strategies/ma_crossover.py`** - ì´ë™í‰ê· ì„  í¬ë¡œìŠ¤ì˜¤ë²„
- ê³¨ë“ í¬ë¡œìŠ¤/ë°ë“œí¬ë¡œìŠ¤ ê°ì§€
- ì´í‰ì„  ê°„ ê±°ë¦¬ ê¸°ë°˜ ì‹ í˜¸ ê°•ë„

**`strategies/rsi.py`** - RSI ì „ëµ
- ê³¼ë§¤ìˆ˜/ê³¼ë§¤ë„ êµ¬ê°„ ê°ì§€
- RSI ê·¹ë‹¨ê°’ ê¸°ë°˜ ì‹ í˜¸ ê°•ë„

**`strategies/macd.py`** - MACD ì „ëµ
- MACD í¬ë¡œìŠ¤ì˜¤ë²„ ê°ì§€
- íˆìŠ¤í† ê·¸ë¨ í¬ê¸° ê¸°ë°˜ ì‹ í˜¸ ê°•ë„

**`strategies/multi.py`** - í†µí•© ì „ëµ
- ì—¬ëŸ¬ ì „ëµì˜ í•©ì˜ ì•Œê³ ë¦¬ì¦˜
- ë‹¤ìˆ˜ê²° ë°©ì‹ ìµœì¢… ì‹ í˜¸ ê²°ì •
- ì „ëµë³„ ì‹ í˜¸ ì¶”ì  ë° ë¡œê¹…

#### 4.3 ì „ëµ íŒ¨í‚¤ì§€ ì´ˆê¸°í™” âœ…
**íŒŒì¼**: `strategies/__init__.py`

ëª¨ë“  ì „ëµì„ ì‰½ê²Œ importí•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±

## â³ ë‹¤ìŒ ì‘ì—… (Phase 3 ì™„ë£Œë¥¼ ìœ„í•´)

### 1. Surge Detector í†µí•©
- [ ] `auto_trading/surge_detector.py` â†’ `trading-engine/engine/strategies/surge_strategy.py`
- [ ] ì „ëµ íŒ¨í„´ìœ¼ë¡œ ë¦¬íŒ©í† ë§

### 2. Trading Engine ì—…ë°ì´íŠ¸
- [ ] `engine/core/engine.py`ì— ìƒˆë¡œìš´ ëª¨ë“ˆë“¤ í†µí•©
- [ ] ì „ëµ íŒ©í† ë¦¬ íŒ¨í„´ êµ¬í˜„
- [ ] ë¦¬ìŠ¤í¬ ê´€ë¦¬ì í†µí•©

### 3. ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ êµ¬ì¶•
- [ ] `engine/events/event_bus.py` ìƒì„±
- [ ] Redis Pub/Sub ë˜ëŠ” Python Queue ê¸°ë°˜
- [ ] ì´ë²¤íŠ¸ íƒ€ì… ì •ì˜
- [ ] ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡

### 4. Backend-Engine ì—°ë™ ì¤€ë¹„
- [ ] Engine â†’ Backend ì´ë²¤íŠ¸ ë°œí–‰ (ì£¼ë¬¸, ì²´ê²°)
- [ ] Backend â†’ Engine ì œì–´ API (ì‹œì‘/ì¤‘ì§€)
- [ ] WebSocket ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì—°ë™

### 5. ì„¤ì • ê´€ë¦¬
- [ ] `engine/core/config.py` ìƒì„±
- [ ] í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ ì„¤ì •
- [ ] ê¸°ì¡´ `auto_trading/config.py` í†µí•©

## ğŸ“Š í†µí•© ì§„í–‰ë¥ 

| ëª¨ë“ˆ | íŒŒì¼ | ìƒíƒœ |
|------|------|------|
| Indicators | technical.py | âœ… ì™„ë£Œ |
| Brokers | base.py | âœ… ì™„ë£Œ |
| Brokers | kiwoom.py | âœ… ì™„ë£Œ |
| Core | risk_manager.py | âœ… ì™„ë£Œ |
| Core | engine.py | â³ ì—…ë°ì´íŠ¸ í•„ìš” |
| Strategies | base.py | âœ… ì™„ë£Œ |
| Strategies | ma_crossover.py | âœ… ì™„ë£Œ |
| Strategies | rsi.py | âœ… ì™„ë£Œ |
| Strategies | macd.py | âœ… ì™„ë£Œ |
| Strategies | multi.py | âœ… ì™„ë£Œ |
| Strategies | surge_strategy.py | â³ ì§„í–‰ ì˜ˆì • |
| Events | event_bus.py | â³ ì§„í–‰ ì˜ˆì • |
| Core | config.py | â³ ì§„í–‰ ì˜ˆì • |

**í˜„ì¬ ì§„í–‰ë¥ **: ì•½ **70%** ì™„ë£Œ

## ğŸ¯ Phase 3 ìµœì¢… ëª©í‘œ

1. âœ… ê¸°ì¡´ ì½”ë“œë¥¼ ìƒˆ êµ¬ì¡°ë¡œ ì™„ì „íˆ í†µí•©
2. âœ… ëª¨ë“ˆí™” ë° ì¬ì‚¬ìš©ì„± í™•ë³´
3. â³ ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ êµ¬í˜„
4. â³ Backendì™€ ì—°ë™ ì¤€ë¹„

## ğŸ“ ìƒˆë¡œìš´ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
trading-engine/
â”œâ”€â”€ engine/
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ engine.py           â³ ì—…ë°ì´íŠ¸ í•„ìš”
â”‚   â”‚   â”œâ”€â”€ risk_manager.py     âœ… ì™„ë£Œ
â”‚   â”‚   â””â”€â”€ config.py            â³ ì§„í–‰ ì˜ˆì •
â”‚   â”œâ”€â”€ brokers/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py              âœ… ì™„ë£Œ
â”‚   â”‚   â””â”€â”€ kiwoom.py            âœ… ì™„ë£Œ
â”‚   â”œâ”€â”€ strategies/
â”‚   â”‚   â”œâ”€â”€ __init__.py          âœ… ì™„ë£Œ
â”‚   â”‚   â”œâ”€â”€ base.py              âœ… ì™„ë£Œ
â”‚   â”‚   â”œâ”€â”€ ma_crossover.py      âœ… ì™„ë£Œ
â”‚   â”‚   â”œâ”€â”€ rsi.py               âœ… ì™„ë£Œ
â”‚   â”‚   â”œâ”€â”€ macd.py              âœ… ì™„ë£Œ
â”‚   â”‚   â”œâ”€â”€ multi.py             âœ… ì™„ë£Œ
â”‚   â”‚   â””â”€â”€ surge_strategy.py    â³ ì§„í–‰ ì˜ˆì •
â”‚   â”œâ”€â”€ indicators/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ technical.py         âœ… ì™„ë£Œ
â”‚   â””â”€â”€ events/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ event_bus.py         â³ ì§„í–‰ ì˜ˆì •
â”‚       â””â”€â”€ handlers.py          â³ ì§„í–‰ ì˜ˆì •
```

## ğŸ’¡ ì£¼ìš” ê°œì„  ì‚¬í•­

### 1. ëª¨ë“ˆí™”
- ê° ê¸°ëŠ¥ì„ ë…ë¦½ëœ íŒŒì¼ë¡œ ë¶„ë¦¬
- ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬ (Single Responsibility)
- ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸

### 2. ì¶”ìƒí™”
- BaseBroker ì¸í„°í˜ì´ìŠ¤ë¡œ ë‹¤ì–‘í•œ ì¦ê¶Œì‚¬ ì§€ì› ê°€ëŠ¥
- BaseStrategy ì¸í„°í˜ì´ìŠ¤ë¡œ ì „ëµ í”ŒëŸ¬ê·¸ì¸ ë°©ì‹
- ì˜ì¡´ì„± ì£¼ì…ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ìš©ì´

### 3. í™•ì¥ì„±
- ìƒˆë¡œìš´ ì „ëµ ì¶”ê°€ ìš©ì´
- ë‹¤ë¥¸ ì¦ê¶Œì‚¬ ë¸Œë¡œì»¤ ì‰½ê²Œ ì¶”ê°€
- ì´ë²¤íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ëŠìŠ¨í•œ ê²°í•©

### 4. ìœ ì§€ë³´ìˆ˜ì„±
- ì‘ì€ íŒŒì¼ë¡œ ë¶„ë¦¬ë˜ì–´ ê´€ë¦¬ ìš©ì´
- ê° ëª¨ë“ˆì˜ ì—­í• ì´ ëª…í™•
- íƒ€ì… íŒíŠ¸ì™€ docstring ì™„ë¹„

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

Phase 3 ì™„ë£Œ í›„:
- **Phase 4**: GUI ê°œë°œ (PySide6)
- **Phase 5**: í†µí•© ë° í…ŒìŠ¤íŠ¸
- **Phase 6**: ë°°í¬ ë° ë¬¸ì„œí™”

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-24
**ì‘ì—… ì‹œê°„**: ì•½ 2ì‹œê°„
**ë‹¤ìŒ ì‘ì—…**: Surge Strategy í†µí•©, ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ êµ¬ì¶•

