# CleonAI Trading Platform - 사용자 매뉴얼

## 목차

1. [시작하기](#시작하기)
2. [대시보드](#대시보드)
3. [매매 화면](#매매-화면)
4. [차트 분석](#차트-분석)
5. [급등주 모니터](#급등주-모니터)
6. [설정](#설정)
7. [로그 뷰어](#로그-뷰어)
8. [자주 묻는 질문](#자주-묻는-질문)

---

## 시작하기

### 1. 프로그램 시작

**방법 1: 스크립트 사용 (권장)**
```powershell
# 모든 서비스 시작
.\scripts\start_all.ps1
```

**방법 2: 수동 시작**
```powershell
# 1. Backend 시작
cd backend
.\.venv\Scripts\Activate.ps1
uvicorn app.main:app

# 2. Frontend 시작 (새 터미널)
cd frontend
.\.venv\Scripts\Activate.ps1
python main.py
```

### 2. 초기 화면

프로그램이 시작되면 메인 윈도우가 표시됩니다:
- 상단: 툴바 (연결 상태, Engine 제어)
- 중앙: 탭 인터페이스 (Dashboard, Trading, Chart, 등)
- 하단: 상태 바

---

## 대시보드

### 개요

대시보드는 현재 계좌 상태와 보유 포지션을 한눈에 확인할 수 있는 화면입니다.

### 주요 정보

#### 1. 계좌 요약
- **총 자산**: 현금 + 보유 주식 평가액
- **현금 잔고**: 현재 사용 가능한 현금
- **주식 평가액**: 보유 주식의 현재 가치
- **총 손익**: 초기 자산 대비 수익/손실
- **수익률**: 퍼센트로 표시된 수익률

#### 2. 보유 포지션

| 열 | 설명 |
|---|---|
| 종목코드 | 주식 종목 코드 (예: 005930) |
| 종목명 | 주식 이름 (예: 삼성전자) |
| 수량 | 보유 주식 수 |
| 평균단가 | 매수 평균 가격 |
| 현재가 | 실시간 현재 가격 |
| 평가금액 | 현재가 × 수량 |
| 손익 | 실현되지 않은 손익 |
| 수익률 | 퍼센트로 표시된 수익률 |

**색상 표시:**
- 🔴 빨간색: 손실 (음수)
- 🔵 파란색: 수익 (양수)

### 자동 새로고침

- 기본: 5초마다 자동 새로고침
- 수동: "🔄 새로고침" 버튼 클릭

---

## 매매 화면

### 주문 생성

#### 1. 종목 검색

**방법 1: 종목 코드 직접 입력**
```
종목 코드: 005930
종목명: (자동 조회)
```

**방법 2: 종목 검색 (향후 추가)**
- 종목명으로 검색
- 인기 종목 리스트에서 선택

#### 2. 주문 설정

**주문 유형:**
- **매수**: 주식 구매
- **매도**: 보유 주식 판매

**가격 유형:**
- **시장가**: 현재 시장 가격으로 즉시 체결
- **지정가**: 원하는 가격 지정 (체결 보장 X)

**수량:**
- 매수할/매도할 주식 수량

**가격:**
- 지정가 주문 시에만 입력

#### 3. 주문 실행

1. 모든 정보 입력
2. "주문 실행" 버튼 클릭
3. 확인 대화상자에서 "확인" 클릭

**주문 확인 대화상자:**
```
[매수] 삼성전자 (005930)
수량: 10주
가격: 70,000원 (지정가)
총 금액: 700,000원

주문을 실행하시겠습니까?
[확인] [취소]
```

### 주문 내역

**표시 정보:**
- 주문 시간
- 종목 정보
- 주문 유형 (매수/매도)
- 수량 및 가격
- 주문 상태 (대기/체결/취소)

**주문 취소:**
- 체결되지 않은 주문만 취소 가능
- 주문 선택 후 "주문 취소" 버튼 클릭

### 거래 내역

**표시 정보:**
- 체결 시간
- 종목 정보
- 거래 유형 (매수/매도)
- 체결 가격 및 수량
- 총 금액
- 손익 (매도 시)

---

## 차트 분석

### 종목 차트

#### 1. 종목 선택

```
종목 코드: 005930 [조회]
```

- 종목 코드 입력 후 "조회" 버튼 클릭
- 또는 Enter 키

#### 2. 시간 범위 선택

```
[1일] [1주] [1개월] [3개월] [6개월] [1년]
```

- 버튼 클릭으로 간편하게 선택
- 선택된 기간의 데이터 표시

#### 3. 차트 종류

**캔들스틱 차트:**
- 🟢 녹색: 상승 (종가 > 시가)
- 🔴 빨간색: 하락 (종가 < 시가)
- 실체: 시가-종가
- 꼬리: 저가-고가

**거래량 차트:**
- 하단에 막대 그래프로 표시
- 높이: 거래량 크기

### 기술적 지표

#### 이동평균선 (MA)

**표시 옵션:**
- ✅ MA5: 5일 이동평균 (빨간색)
- ✅ MA20: 20일 이동평균 (파란색)
- ✅ MA60: 60일 이동평균 (녹색)

**해석:**
- 단기선 > 장기선: 상승 추세
- 단기선 < 장기선: 하락 추세
- 골든 크로스: 단기선이 장기선을 상향 돌파 → 매수 신호
- 데드 크로스: 단기선이 장기선을 하향 돌파 → 매도 신호

#### 볼린저 밴드

**구성:**
- 중심선: 20일 이동평균
- 상단 밴드: 중심선 + (2 × 표준편차)
- 하단 밴드: 중심선 - (2 × 표준편차)

**해석:**
- 주가가 하단 밴드 근처: 과매도 → 매수 고려
- 주가가 상단 밴드 근처: 과매수 → 매도 고려
- 밴드 폭 축소: 변동성 감소, 큰 움직임 예상
- 밴드 폭 확대: 변동성 증가

### 현재가 정보

**실시간 표시:**
```
현재가: 72,000원
변동: +1,000원 (+1.41%)
거래량: 5,000,000주
```

---

## 급등주 모니터

### 개요

실시간으로 급등하는 종목을 자동으로 감지하여 표시합니다.

### 급등주 목록

**표시 정보:**
- 종목 코드 및 이름
- 현재가
- 상승률 (%)
- 거래량 비율
- 감지 시간

**정렬:**
- 기본: 상승률 높은 순
- 열 제목 클릭으로 정렬 변경

### 감지 설정

**펼치기/접기:**
- "▼ 감지 설정 표시/숨기기" 버튼 클릭

**설정 항목:**

#### 1. 감지 활성화
```
☑ 급등주 감지 활성화
```
- 체크: 급등주 자동 감지
- 해제: 감지 중지

#### 2. 후보 종목 수
```
후보 종목 수: [50]
```
- 거래 상위 N개 종목 중에서 급등주 탐색
- 범위: 10 ~ 200

#### 3. 최소 상승률
```
최소 상승률: [5.0] %
```
- 이 값 이상 상승한 종목만 감지
- 범위: 3.0% ~ 20.0%

#### 4. 최소 거래량 비율
```
최소 거래량 비율: [2.0] 배
```
- 평균 거래량의 N배 이상인 종목만 감지
- 범위: 1.5배 ~ 10.0배

#### 5. 재감지 대기 시간
```
재감지 대기 시간: [30] 분
```
- 동일 종목 재감지까지의 대기 시간
- 범위: 10분 ~ 240분

**설정 저장:**
- 값 변경 후 자동 저장
- "설정 저장" 버튼 클릭

### 자동 매수

**활성화:**
```
☑ 급등주 자동 매수
```

**동작:**
1. 급등주 감지
2. 자동으로 매수 주문 생성
3. 사용자 승인 대기 (기본)
4. 승인 시 주문 실행

**자동 승인 모드:**
```
☑ 자동 승인
```
- 체크: 승인 없이 즉시 주문 실행 (주의!)
- 해제: 매번 사용자 승인 필요

⚠️ **주의사항**
- 자동 승인 모드는 실계좌에서 주의해서 사용
- 리스크 관리 설정 확인 필수

### 통계 정보

```
오늘 감지된 급등주: 15개
현재 감지 대기 중: 8개
```

---

## 설정

### 전략 설정

#### 1. 이동평균 전략

**활성화:**
```
☑ 이동평균 전략 사용
```

**설정 항목:**
- **단기 이평선**: 5 ~ 50일 (기본: 5일)
- **장기 이평선**: 10 ~ 200일 (기본: 20일)

**신호 생성:**
- 골든 크로스: 매수 신호
- 데드 크로스: 매도 신호

#### 2. RSI 전략

**활성화:**
```
☑ RSI 전략 사용
```

**설정 항목:**
- **RSI 기간**: 5 ~ 50일 (기본: 14일)
- **과매도 기준**: 10 ~ 40 (기본: 30)
- **과매수 기준**: 60 ~ 90 (기본: 70)

**신호 생성:**
- RSI < 과매도: 매수 신호
- RSI > 과매수: 매도 신호

#### 3. MACD 전략

**활성화:**
```
☑ MACD 전략 사용
```

**설정 항목:**
- **단기 EMA**: 5 ~ 20일 (기본: 12일)
- **장기 EMA**: 20 ~ 50일 (기본: 26일)
- **시그널 기간**: 5 ~ 20일 (기본: 9일)

**신호 생성:**
- MACD > Signal: 매수 신호
- MACD < Signal: 매도 신호

### 리스크 관리

#### 포지션 관리

**최대 보유 종목 수:**
```
최대 보유 종목 수: [3] 개
```
- 동시에 보유 가능한 최대 종목 수
- 분산 투자 및 리스크 관리

**종목당 투자 비율:**
```
종목당 투자 비율: [10.0] %
```
- 총 자산 대비 종목당 투자 비율
- 예: 총 자산 10,000,000원 → 종목당 1,000,000원

#### 손익 관리

**손절매 비율:**
```
손절매 비율: [5.0] %
```
- 매수가 대비 이 비율 이상 하락 시 자동 매도
- 예: 매수가 100,000원 → 95,000원 이하 시 매도

**익절매 비율:**
```
익절매 비율: [10.0] %
```
- 매수가 대비 이 비율 이상 상승 시 자동 매도
- 예: 매수가 100,000원 → 110,000원 이상 시 매도

**일일 손실 한도:**
```
일일 손실 한도: [3.0] %
```
- 하루 총 손실이 이 비율 초과 시 자동매매 중지
- 예: 총 자산 10,000,000원 → 300,000원 손실 시 중지

### 시스템 설정

#### 자동매매

**자동매매 활성화:**
```
☑ 자동매매 활성화
```
- 체크: 전략에 따라 자동으로 매매
- 해제: 신호만 표시, 수동 매매

**모의투자 모드:**
```
☑ 모의투자 사용
```
- 체크: 키움 모의투자 계좌 사용
- 해제: 실계좌 사용 (매우 주의!)

#### 로그 설정

**로그 레벨:**
```
로그 레벨: [INFO] ▼
```
- DEBUG: 모든 로그 (개발용)
- INFO: 일반 정보
- WARNING: 경고
- ERROR: 오류만

**로그 파일 경로:**
```
로그 파일 경로: ./logs
```

### 설정 저장

**버튼:**
- "설정 저장": 현재 설정 저장
- "기본값 복원": 모든 설정을 기본값으로 복원

---

## 로그 뷰어

### 로그 테이블

**열:**
- **시간**: 로그 발생 시간
- **레벨**: DEBUG | INFO | WARNING | ERROR
- **모듈**: 로그를 생성한 모듈
- **메시지**: 로그 내용

**색상:**
- DEBUG: 회색
- INFO: 검은색
- WARNING: 주황색
- ERROR: 빨간색

### 필터링

**레벨 필터:**
```
☑ DEBUG  ☑ INFO  ☑ WARNING  ☑ ERROR
```
- 체크박스로 표시할 레벨 선택
- 여러 레벨 동시 선택 가능

**검색:**
```
검색: [키워드] [검색]
```
- 메시지 내용으로 검색
- 실시간 필터링

### 로그 내보내기

**버튼: "로그 내보내기"**

1. 버튼 클릭
2. 저장 위치 및 파일명 선택
3. "저장" 클릭

**내보내기 형식:**
- CSV: Excel 등에서 열람 가능
- TXT: 텍스트 파일

### 자동 스크롤

```
☑ 자동 스크롤
```
- 체크: 새 로그 발생 시 자동으로 스크롤
- 해제: 현재 위치 유지

---

## 자주 묻는 질문

### Q1. Trading Engine이 시작되지 않아요.

**해결 방법:**
1. 32-bit Python이 설치되어 있는지 확인
2. 키움 OpenAPI가 설치되어 있는지 확인
3. 키움 OpenAPI Plus에서 로그인 테스트
4. 로그 뷰어에서 오류 메시지 확인

### Q2. 주문이 체결되지 않아요.

**원인:**
- 지정가 주문이 시장가와 차이가 큼
- 호가가 없는 종목
- 시장 마감 시간

**해결:**
- 시장가 주문 사용
- 가격 조정
- 거래 시간 확인 (9:00 ~ 15:30)

### Q3. 급등주가 감지되지 않아요.

**확인 사항:**
- "급등주 감지 활성화" 체크 여부
- 최소 상승률/거래량 비율 설정 확인
- Trading Engine 실행 상태
- 시장 시간 (9:00 ~ 15:30)

### Q4. 데이터베이스 연결 오류가 나요.

**해결 방법:**
```powershell
# Docker 컨테이너 상태 확인
docker ps

# PostgreSQL 재시작
docker-compose restart postgres

# 연결 테스트
docker exec -it cleonai_postgres psql -U cleonai -d trading_db
```

### Q5. 손절매/익절매가 작동하지 않아요.

**확인 사항:**
- 설정에서 손절매/익절매 비율 확인
- "자동매매 활성화" 체크 여부
- Trading Engine 실행 상태
- 리스크 관리 모듈 로그 확인

### Q6. 프로그램이 느려요.

**해결 방법:**
- 로그 레벨을 INFO 이상으로 설정
- 오래된 로그 파일 삭제
- 데이터베이스 VACUUM 실행
- 시스템 리소스 확인 (CPU, RAM)

### Q7. 실계좌로 어떻게 전환하나요?

**주의!** 실계좌 사용은 매우 신중해야 합니다.

**전환 방법:**
1. 설정 > 시스템 설정
2. "모의투자 사용" 체크 해제
3. .env 파일에서 `USE_SIMULATION=false`
4. `KIWOOM_ACCOUNT_NUMBER` 설정
5. Trading Engine 재시작

**권장 사항:**
- 최소 1주일 이상 모의투자로 테스트
- 소액으로 시작
- 손절매/익절매 반드시 설정
- 일일 손실 한도 설정

---

## 추가 도움말

### 문서
- API 문서: `docs/API.md`
- 아키텍처 문서: `docs/ARCHITECTURE.md`
- 배포 가이드: `docs/DEPLOYMENT.md`

### 지원
- GitHub Issues: https://github.com/yourusername/cleonai-trading-platform/issues
- 이메일: support@cleonai.com

---

**작성일**: 2025-10-24  
**버전**: 1.0  
**담당자**: CleonAI Development Team

