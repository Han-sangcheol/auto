# ğŸ› ì¸ë´íŠ¸ ë¬¸ì œ ìˆ˜ì • - ë§¤ìˆ˜ ë¯¸ì‹¤í–‰ (2025-10-28)

## ğŸ“Œ ë¬¸ì œ ì¦ìƒ

**ê¸‰ë“±ì£¼ê°€ ê°ì§€ë˜ê³  ìŠ¹ì¸ë˜ì—ˆì§€ë§Œ ë§¤ìˆ˜ê°€ ì „í˜€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ**

### ë¡œê·¸ ë¶„ì„

```
14:27:16 | âœ… ê¸‰ë“±ì£¼ ì¶”ê°€: ë²”í•œí“¨ì–¼ì…€ (382900) â† ìŠ¹ì¸ ì™„ë£Œ âœ“
14:27:17 | â³ ë‹¤ë¥¸ ê¸‰ë“±ì£¼ ì²˜ë¦¬ ì¤‘ - ëŒ€ê¸°: í…”ì½˜RFì œì•½ â† ëŒ€ê¸° ìƒíƒœ
14:27:17 | â³ ë‹¤ë¥¸ ê¸‰ë“±ì£¼ ì²˜ë¦¬ ì¤‘ - ëŒ€ê¸°: ì•„ì´ì”¨í‹°ì¼€ì´ â† ëŒ€ê¸° ìƒíƒœ

â†’ "ì‹¤ì‹œê°„ ì‹œì„¸ ë“±ë¡ ì‹œë„" ë¡œê·¸ ì—†ìŒ âœ—
â†’ "ê¸‰ë“±ì£¼ ì¦‰ì‹œ ë§¤ìˆ˜ ì‹œë„" ë¡œê·¸ ì—†ìŒ âœ—
â†’ "execute_buy í•¨ìˆ˜ í˜¸ì¶œ" ë¡œê·¸ ì—†ìŒ âœ—
â†’ "ê¸‰ë“±ì£¼ ì²˜ë¦¬ ì™„ë£Œ" ë¡œê·¸ ì—†ìŒ âœ—
```

**ê²°ê³¼:**
- ì²« ë²ˆì§¸ ê¸‰ë“±ì£¼(ë²”í•œí“¨ì–¼ì…€)ê°€ ì¶”ê°€ë˜ì—ˆì§€ë§Œ ë§¤ìˆ˜ ë‹¨ê³„ë¡œ ì§„í–‰ ì•ˆ ë¨
- `surge_processing` í”Œë˜ê·¸ê°€ `True`ë¡œ ê³ ì •ë¨
- ë‹¤ë¥¸ ê¸‰ë“±ì£¼ë“¤ì€ ëª¨ë‘ ëŒ€ê¸° ìƒíƒœë¡œ ë§‰í˜
- ë§¤ìˆ˜ê°€ ì „í˜€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

## ğŸ” ì›ì¸ ë¶„ì„

### 1. ì¸ë´íŠ¸ ë¬¸ì œ (ì£¼ ì›ì¸)

**Before (ë¬¸ì œ ì½”ë“œ):**

```python
# 1108: if stock_code not in self.watch_list:
#   1109-1114: watch_list ì¶”ê°€ ë° ë¡œê·¸ (ì‹¤í–‰ë¨ âœ“)
#   1117-1121: GUI ë¡œê·¸ ì¶”ê°€ (ì‹¤í–‰ë¨?)
#   1123-1168: ì‹¤ì‹œê°„ ì‹œì„¸ ë“±ë¡ + ë§¤ìˆ˜ ì‹¤í–‰ (ì‹¤í–‰ ì•ˆ ë¨ âœ—)
```

ëª¨ë“  ì‹¤í–‰ ë¡œì§ì´ `if stock_code not in self.watch_list:` ë¸”ë¡ ì•ˆì— ë“¤ì–´ê°€ ìˆì—ˆìŠµë‹ˆë‹¤!

**ë¬¸ì œ:**
- ì¢…ëª©ì´ watch_listì— ì—†ìœ¼ë©´ â†’ ì¶”ê°€ëŠ” ë˜ì§€ë§Œ, GUI ë¡œê·¸ ì²˜ë¦¬ì—ì„œ ë¸”ë¡œí‚¹
- GUI ë¡œê·¸ ì¶”ê°€ ì‹œ ì˜ˆì™¸ ë˜ëŠ” ë¸”ë¡œí‚¹ ë°œìƒ
- ì´í›„ ì½”ë“œ(ì‹œì„¸ ë“±ë¡, ë§¤ìˆ˜)ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
- finally ë¸”ë¡ ë¯¸ì‹¤í–‰ â†’ `surge_processing = False` ì•ˆ ë¨
- ë‹¤ë¥¸ ê¸‰ë“±ì£¼ë“¤ ëª¨ë‘ ë¸”ë¡œí‚¹ë¨

### 2. GUI ìŠ¤ë ˆë“œ ë¸”ë¡œí‚¹

```python
# 1117-1121: GUI ë¡œê·¸ ì¶”ê°€
self._add_gui_log(
    f"ğŸš€ ê¸‰ë“±ì£¼: {candidate.name} ({stock_code}) "
    f"{candidate.current_change_rate:+.2f}% â†‘",
    "orange"
)
```

- GUI ìŠ¤ë ˆë“œì™€ì˜ í†µì‹  ë¬¸ì œ
- PyQtì˜ ìŠ¤ë ˆë“œ ì•ˆì „ì„± ë¬¸ì œ
- ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ GUI ì—…ë°ì´íŠ¸ ì‹œë„ â†’ ë¸”ë¡œí‚¹

## âœ… í•´ê²° ë°©ë²•

### 1. ì¸ë´íŠ¸ ìˆ˜ì •

**After (ìˆ˜ì •ë¨):**

```python
# watch_list ì¶”ê°€
if stock_code not in self.watch_list:
    self.watch_list.append(stock_code)
    log.success(...)

# GUI ë¡œê·¸ ì¶”ê°€ (ì‹¤íŒ¨í•´ë„ ê³„ì† ì§„í–‰) - if ë°–ìœ¼ë¡œ ì´ë™
try:
    self._add_gui_log(...)
except Exception as gui_error:
    log.debug(f"GUI ë¡œê·¸ ì¶”ê°€ ì‹¤íŒ¨ (ë¬´ì‹œ): {gui_error}")

# ì‹¤ì‹œê°„ ì‹œì„¸ ë“±ë¡ - if ë°–ìœ¼ë¡œ ì´ë™
try:
    log.info(f"ğŸ” ì‹¤ì‹œê°„ ì‹œì„¸ ë“±ë¡ ì‹œë„: {stock_code}")
    self.kiwoom.register_real_data([stock_code])
    log.info(f"âœ… ì‹¤ì‹œê°„ ì‹œì„¸ ë“±ë¡ ì™„ë£Œ: {stock_code}")
except Exception as reg_error:
    log.error(...)

# ì¶”ê°€ ì™„ë£Œ ê¸°ë¡ - if ë°–ìœ¼ë¡œ ì´ë™
self.surge_detected_stocks.add(stock_code)

# ë§¤ìˆ˜ ì‹¤í–‰ - if ë°–ìœ¼ë¡œ ì´ë™
try:
    log.warning("ğŸš€ ê¸‰ë“±ì£¼ ì¦‰ì‹œ ë§¤ìˆ˜ ì‹œë„!")
    self.execute_buy(stock_code, candidate.current_price, signal_result)
except Exception as buy_error:
    log.error(...)
```

### 2. GUI ë¡œê·¸ ì•ˆì „ ì²˜ë¦¬

```python
# Before: ì˜ˆì™¸ ì²˜ë¦¬ ì—†ìŒ
self._add_gui_log(...)

# After: try-exceptë¡œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
try:
    self._add_gui_log(...)
except Exception as gui_error:
    log.debug(f"GUI ë¡œê·¸ ì¶”ê°€ ì‹¤íŒ¨ (ë¬´ì‹œ): {gui_error}")
```

## ğŸ“Š ìˆ˜ì • í›„ ì˜ˆìƒ ë™ì‘

### 1. ê¸‰ë“± ê°ì§€
```
ğŸš€ ê¸‰ë“± ê°ì§€! ë²”í•œí“¨ì–¼ì…€ (382900) | ìƒìŠ¹ë¥ : +15.93%
```

### 2. ìŠ¹ì¸
```
âœ… ê¸‰ë“±ì£¼ ìë™ ìŠ¹ì¸: ë²”í•œí“¨ì–¼ì…€
```

### 3. ì¶”ê°€ ë° ì‹œì„¸ ë“±ë¡
```
âœ… ê¸‰ë“±ì£¼ ì¶”ê°€: ë²”í•œí“¨ì–¼ì…€ (382900)
ğŸ” ì‹¤ì‹œê°„ ì‹œì„¸ ë“±ë¡ ì‹œë„: 382900
âœ… ì‹¤ì‹œê°„ ì‹œì„¸ ë“±ë¡ ì™„ë£Œ: 382900
```

### 4. ë§¤ìˆ˜ ì‹¤í–‰
```
======================================================================
ğŸš€ ê¸‰ë“±ì£¼ ì¦‰ì‹œ ë§¤ìˆ˜ ì‹œë„!
   ì¢…ëª©: ë²”í•œí“¨ì–¼ì…€ (382900)
   í˜„ì¬ê°€: 36,750ì›
   ìƒìŠ¹ë¥ : +15.93%
   ê±°ë˜ëŸ‰ ë¹„ìœ¨: 2.00ë°°
======================================================================

ğŸ”„ execute_buy í•¨ìˆ˜ í˜¸ì¶œ ì¤€ë¹„ ì™„ë£Œ
ğŸ” [execute_buy] ë¦¬ìŠ¤í¬ ê²€ì¦ ì¤‘...
âœ… [execute_buy] ë¦¬ìŠ¤í¬ ê²€ì¦ í†µê³¼
âœ… [execute_buy] ìˆ˜ëŸ‰ ê³„ì‚° ì™„ë£Œ: 27ì£¼

ğŸ“ˆ ë§¤ìˆ˜ ì‹œë„: 382900 ë²”í•œí“¨ì–¼ì…€ 27ì£¼ @ 36,750ì›
âœ… ë§¤ìˆ˜ ì£¼ë¬¸ ì „ì†¡ ì™„ë£Œ (ì£¼ë¬¸ë²ˆí˜¸: 123456)
ğŸ‰ ë§¤ìˆ˜ ì²´ê²°: 382900 ë²”í•œí“¨ì–¼ì…€ 27ì£¼ @ 36,750ì›

âœ… execute_buy í•¨ìˆ˜ í˜¸ì¶œ ì™„ë£Œ
âœ… ê¸‰ë“±ì£¼ ì²˜ë¦¬ ì™„ë£Œ: ë²”í•œí“¨ì–¼ì…€ (382900)
```

### 5. ë‹¤ìŒ ê¸‰ë“±ì£¼ ì²˜ë¦¬
```
âœ… ê¸‰ë“±ì£¼ ìë™ ìŠ¹ì¸: í…”ì½˜RFì œì•½
âœ… ê¸‰ë“±ì£¼ ì¶”ê°€: í…”ì½˜RFì œì•½ (200230)
ğŸš€ ê¸‰ë“±ì£¼ ì¦‰ì‹œ ë§¤ìˆ˜ ì‹œë„!
...
```

## ğŸš€ í”„ë¡œê·¸ë¨ ì¬ì‹œì‘

### 1. í˜„ì¬ í”„ë¡œê·¸ë¨ ì¢…ë£Œ

```bash
Ctrl+C
```

ë˜ëŠ”

```bash
taskkill /F /IM python.exe
```

### 2. í”„ë¡œê·¸ë¨ ì¬ì‹œì‘

```bash
start.bat
```

### 3. ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸

```powershell
# ìƒˆ í„°ë¯¸ë„ ì°½ì—ì„œ ì‹¤í–‰
Get-Content logs\trading_2025-10-28.log -Wait -Tail 50
```

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

ìˆ˜ì • í›„ í™•ì¸:

- [x] ì¸ë´íŠ¸ ìˆ˜ì • ì™„ë£Œ
- [x] GUI ë¡œê·¸ try-except ì¶”ê°€
- [x] ë¦°íŠ¸ ì—ëŸ¬ ì—†ìŒ
- [ ] í”„ë¡œê·¸ë¨ ì¬ì‹œì‘
- [ ] ê¸‰ë“±ì£¼ ê°ì§€ í™•ì¸
- [ ] "ì‹¤ì‹œê°„ ì‹œì„¸ ë“±ë¡ ì‹œë„" ë¡œê·¸ í™•ì¸
- [ ] "ê¸‰ë“±ì£¼ ì¦‰ì‹œ ë§¤ìˆ˜ ì‹œë„" ë¡œê·¸ í™•ì¸
- [ ] "execute_buy í•¨ìˆ˜ í˜¸ì¶œ" ë¡œê·¸ í™•ì¸
- [ ] "ê¸‰ë“±ì£¼ ì²˜ë¦¬ ì™„ë£Œ" ë¡œê·¸ í™•ì¸
- [ ] ë§¤ìˆ˜ ì²´ê²° í™•ì¸
- [ ] GUI í…Œì´ë¸”ì— ë³´ìœ  ì¢…ëª© í‘œì‹œ

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ê¸‰ë“±ì£¼ ë‹¤ìˆ˜ ê°ì§€ ê°€ëŠ¥

- í”„ë¡œê·¸ë¨ ì‹œì‘ ì‹œ ì—¬ëŸ¬ ê¸‰ë“±ì£¼ ë™ì‹œ ê°ì§€ ê°€ëŠ¥
- ê° ê¸‰ë“±ì£¼ë§ˆë‹¤ ìë™ ë§¤ìˆ˜ ì§„í–‰
- ìµœëŒ€ 20ê°œ ì¢…ëª©ê¹Œì§€ë§Œ ë³´ìœ 

### 2. ìë™ ë§¤ìˆ˜ í™•ì¸

```
ê¸‰ë“±ì£¼ ê°ì§€ â†’ ìë™ ìŠ¹ì¸ â†’ ë§¤ìˆ˜ ì‹¤í–‰ â†’ ì²´ê²° ì™„ë£Œ
```

### 3. ì†ìµ ê´€ë¦¬

- ì†ì ˆë§¤: -5% ìë™ ì‹¤í–‰
- ìµì ˆë§¤: +10% ìë™ ì‹¤í–‰
- ì¼ì¼ ì†ì‹¤ í•œë„: -3%

## ğŸ”— ê´€ë ¨ ìˆ˜ì • ì‚¬í•­

ì´ë²ˆ ìˆ˜ì •ìœ¼ë¡œ ì™„ë£Œëœ ëª¨ë“  ì´ìŠˆ:

1. âœ… **ì½œë°± íŒŒë¼ë¯¸í„° ì˜¤ë¥˜** â†’ `CALLBACK_PARAMETER_FIX_2025-10-28.md`
2. âœ… **ê¸‰ë“±ì£¼ ì¡°ê±´ ì™„í™”** â†’ `GUI_NO_DATA_FIX_2025-10-28.md`
3. âœ… **í˜¸ê°€ ë¶„ì„ ê¸°ëŠ¥** â†’ `ORDERBOOK_ANALYSIS_2025-10-28.md`
4. âœ… **ì¸ë´íŠ¸ ë¬¸ì œ (ë§¤ìˆ˜ ë¯¸ì‹¤í–‰)** â†’ ë³¸ ë¬¸ì„œ â¬…ï¸ **ìµœì¢… ìˆ˜ì •**

## ğŸ¯ ìµœì¢… í™•ì¸

### ë¡œê·¸ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

```powershell
# í„°ë¯¸ë„ 1: í”„ë¡œê·¸ë¨ ì‹¤í–‰
start.bat

# í„°ë¯¸ë„ 2: ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸
Get-Content logs\trading_2025-10-28.log -Wait -Tail 50
```

### ì„±ê³µ í™•ì¸ í‚¤ì›Œë“œ

```
âœ… "ì‹¤ì‹œê°„ ì‹œì„¸ ë“±ë¡ ì‹œë„" ìˆì–´ì•¼ í•¨
âœ… "ì‹¤ì‹œê°„ ì‹œì„¸ ë“±ë¡ ì™„ë£Œ" ìˆì–´ì•¼ í•¨
âœ… "ê¸‰ë“±ì£¼ ì¦‰ì‹œ ë§¤ìˆ˜ ì‹œë„" ìˆì–´ì•¼ í•¨
âœ… "execute_buy í•¨ìˆ˜ í˜¸ì¶œ ì¤€ë¹„ ì™„ë£Œ" ìˆì–´ì•¼ í•¨
âœ… "ë§¤ìˆ˜ ì‹œë„" ìˆì–´ì•¼ í•¨
âœ… "ë§¤ìˆ˜ ì²´ê²°" ìˆì–´ì•¼ í•¨
âœ… "ê¸‰ë“±ì£¼ ì²˜ë¦¬ ì™„ë£Œ" ìˆì–´ì•¼ í•¨
```

### ë¬¸ì œ ì§€ì† ì‹œ

```powershell
# ì—ëŸ¬ ë¡œê·¸ í™•ì¸
Get-Content logs\error_2025-10-28.log -Tail 20

# íŠ¹ì • ì¢…ëª© ê²€ìƒ‰
Select-String -Path logs\trading_2025-10-28.log -Pattern "ë²”í•œí“¨ì–¼ì…€"
```

## ğŸ’¡ ì¶”ê°€ ê°œì„ ì‚¬í•­

### í–¥í›„ ì ìš© ê³ ë ¤ì‚¬í•­

1. **GUI ì—…ë°ì´íŠ¸ë¥¼ QueuedConnectionìœ¼ë¡œ ì²˜ë¦¬**
   ```python
   # GUI ë¡œê·¸ë¥¼ ë³„ë„ íë¡œ ì²˜ë¦¬
   self.gui_log_queue.put((message, color))
   ```

2. **surge_processingì„ íƒ€ì„ì•„ì›ƒ ì¶”ê°€**
   ```python
   # ì²˜ë¦¬ ì‹œì‘ ì‹œê°„ ê¸°ë¡
   self.surge_processing_start_time = time.time()
   
   # íƒ€ì„ì•„ì›ƒ ì²´í¬ (30ì´ˆ)
   if time.time() - self.surge_processing_start_time > 30:
       self.surge_processing = False
   ```

3. **ë§¤ìˆ˜ ì‹¤í–‰ì„ ë³„ë„ ìŠ¤ë ˆë“œë¡œ ë¶„ë¦¬**
   ```python
   # ë§¤ìˆ˜ë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì²˜ë¦¬
   buy_thread = threading.Thread(
       target=self.execute_buy,
       args=(stock_code, price, signal_result),
       daemon=True
   )
   buy_thread.start()
   ```

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-28
**ìƒíƒœ**: âœ… ìˆ˜ì • ì™„ë£Œ
**íš¨ê³¼**: ğŸ¯ ê¸‰ë“±ì£¼ ë§¤ìˆ˜ ì •ìƒ ì‹¤í–‰
**ì¤‘ìš”**: ğŸ”„ **ë°˜ë“œì‹œ í”„ë¡œê·¸ë¨ ì¬ì‹œì‘ í•„ìš”!**

