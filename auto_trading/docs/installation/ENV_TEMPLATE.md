# .env 파일 템플릿 및 설정 가이드

## .env 파일이란?

`.env` 파일은 프로그램의 설정 값을 저장하는 파일입니다.
계좌번호, 비밀번호 등 민감한 정보를 코드와 분리하여 안전하게 관리할 수 있습니다.

## .env 파일 생성 방법

### Windows PowerShell (권장)

```powershell
# auto_trading 폴더로 이동
cd D:\cleonAI\auto_trading

# .env 파일 생성
New-Item -ItemType File -Path .env -Force

# 메모장으로 열기
notepad .env
```

### Windows CMD

```cmd
cd D:\cleonAI\auto_trading
type nul > .env
notepad .env
```

### 파일 탐색기 (수동)

1. `D:\cleonAI\auto_trading` 폴더 열기
2. 빈 공간에서 **우클릭** → **새로 만들기** → **텍스트 문서**
3. 파일 이름을 `.env`로 변경 (확장자 포함)
4. 메모장으로 열기

## .env 파일 템플릿

아래 내용을 복사하여 `.env` 파일에 붙여넣고, 본인의 정보로 수정하세요.

```env
# ============================================================
# CleonAI 자동매매 프로그램 환경 변수 설정
# ============================================================

# ============================================================
# 키움증권 계좌 정보 (필수)
# ============================================================

# 계좌번호 (10자리)
# 모의투자: 8로 시작 (예: 8113110311)
# 실계좌: 다른 숫자로 시작
KIWOOM_ACCOUNT_NUMBER=8113110311

# 계좌 비밀번호 (4자리 숫자)
# 주의: 로그인 비밀번호가 아닙니다!
# HTS에서 주문할 때 입력하는 4자리 비밀번호입니다
# 
# 설정 방법:
# 1. 키움 영웅문 HTS 로그인
# 2. [모의투자] → [계좌관리] → [계좌 비밀번호 등록]
# 3. 4자리 숫자 입력 (예: 0000, 1234)
# 
# 자세한 가이드: docs/troubleshooting/PASSWORD_ISSUE.md
KIWOOM_ACCOUNT_PASSWORD=0000

# ============================================================
# 거래 모드 설정 (필수)
# ============================================================

# 모의투자 사용 여부
# True: 모의투자 (권장 - 실제 자금 사용 안 함)
# False: 실계좌 (주의 - 실제 자금 사용)
USE_SIMULATION=True

# ============================================================
# 관심 종목 설정 (필수)
# ============================================================

# 관심 종목 리스트 (종목코드 6자리, 쉼표로 구분, 공백 없이)
# 예시:
#   005930: 삼성전자
#   000660: SK하이닉스
#   035720: 카카오
WATCH_LIST=005930,000660,035720

# ============================================================
# 리스크 관리 설정 (선택사항 - 기본값 사용 가능)
# ============================================================

# 최대 동시 보유 종목 수 (기본: 20개)
MAX_STOCKS=20

# 종목당 투자 비율 (%) (기본: 10%)
POSITION_SIZE_PERCENT=10.0

# 손절매 비율 (%) (기본: 5%)
STOP_LOSS_PERCENT=5.0

# 익절매 비율 (%) (기본: 10%)
TAKE_PROFIT_PERCENT=10.0

# 일일 손실 한도 (%) (기본: 3%)
DAILY_LOSS_LIMIT_PERCENT=3.0

# ============================================================
# 급등주 감지 설정 (선택사항)
# ============================================================

# 급등주 감지 활성화 (기본: True)
ENABLE_SURGE_DETECTION=True

# 급등주 자동 승인 (기본: True)
# True: 자동 매수, False: 수동 승인
# ⚠️ 실계좌에서는 False 권장
SURGE_AUTO_APPROVE=True

# 거래대금 상위 종목 수 (기본: 30개)
SURGE_CANDIDATE_COUNT=30

# 최소 상승률 (%) (기본: 5.0%)
SURGE_MIN_CHANGE_RATE=5.0

# 최소 거래량 비율 (배수) (기본: 2.0배)
SURGE_MIN_VOLUME_RATIO=2.0

# ============================================================
# 기타 설정 (선택사항)
# ============================================================

# 알림 활성화 (기본: True)
ENABLE_NOTIFICATIONS=True

# 소리 알림 활성화 (기본: True)
ENABLE_SOUND_ALERTS=True

# 헬스 모니터 활성화 (기본: True)
ENABLE_HEALTH_MONITOR=True

# 데이터베이스 활성화 (기본: False)
DB_ENABLED=False
```

## 필수 설정 항목

최소한 다음 3가지는 **반드시** 설정해야 합니다:

| 항목 | 설명 | 예시 |
|------|------|------|
| `KIWOOM_ACCOUNT_NUMBER` | 키움증권 계좌번호 | 8113110311 |
| `KIWOOM_ACCOUNT_PASSWORD` | 계좌 비밀번호 (4자리) | 0000 |
| `WATCH_LIST` | 관심 종목 | 005930,000660,035720 |

## 설정 예시

### 모의투자 (초보자 추천)

```env
KIWOOM_ACCOUNT_NUMBER=8113110311
KIWOOM_ACCOUNT_PASSWORD=0000
USE_SIMULATION=True
WATCH_LIST=005930,000660,035720
SURGE_AUTO_APPROVE=True
```

### 실계좌 (신중 모드)

```env
KIWOOM_ACCOUNT_NUMBER=1234567890
KIWOOM_ACCOUNT_PASSWORD=1234
USE_SIMULATION=False
WATCH_LIST=005930
MAX_STOCKS=1
POSITION_SIZE_PERCENT=5.0
STOP_LOSS_PERCENT=3.0
SURGE_AUTO_APPROVE=False
```

## 계좌 비밀번호 설정

계좌 비밀번호는 HTS에서 주문할 때 입력하는 4자리 숫자 비밀번호입니다.

### 모의투자 계좌 비밀번호 설정 방법

1. **키움 영웅문 HTS 실행 및 로그인**
2. 상단 메뉴: **[모의투자]** 클릭
3. **[계좌관리]** → **[계좌 비밀번호 등록/변경]** 선택
4. **4자리 숫자 비밀번호 입력** (예: 0000, 1234)
5. 저장

### 실계좌 계좌 비밀번호

실계좌는 계좌 개설 시 이미 설정되어 있습니다.
HTS에서 주문할 때 입력하는 4자리 숫자 비밀번호를 사용하세요.

### 비밀번호 문제 해결

계좌 비밀번호 관련 문제가 발생하면:
[PASSWORD_ISSUE.md](../troubleshooting/PASSWORD_ISSUE.md) 참고

## 종목코드 찾기

### 방법 1: 네이버 증권

1. https://finance.naver.com 접속
2. 종목 검색 (예: "삼성전자")
3. URL 확인: `...code=005930`
4. 005930이 삼성전자의 종목코드

### 방법 2: 키움 HTS

1. HTS에서 종목 검색
2. 종목 정보에서 코드 확인

## 설정 확인

`.env` 파일 설정 후 프로그램 실행 시 로그 확인:

```
✅ 로그인 성공!
   💳 계좌번호: 8113110311
   👤 사용자: 홍길동
   🖥️  서버: 모의투자 서버
   🔗 연결 상태: 정상
```

계좌 비밀번호 설정 확인:
```
계좌 비밀번호: 설정됨 (****)
```

## 보안 주의사항

### 절대 금지

- ❌ `.env` 파일을 Git에 커밋
- ❌ `.env` 파일을 타인과 공유
- ❌ 스크린샷에 `.env` 내용 포함
- ❌ 공개 장소에서 `.env` 파일 열기

### 권장 사항

- ✅ `.env` 파일을 안전한 위치에 백업
- ✅ 정기적으로 비밀번호 변경 (실계좌)
- ✅ PC 보안 강화 (백신, 방화벽)
- ✅ 모의투자로 충분히 테스트

## 문제 해결

### .env 파일이 보이지 않습니다

**파일 탐색기 설정:**
1. 파일 탐색기 열기
2. 상단 메뉴: **보기** 탭 클릭
3. **숨김 항목** 체크박스 선택

### 설정이 적용되지 않습니다

**확인 사항:**
1. 파일 이름이 정확히 `.env`인지 확인 (`.env.txt` ❌)
2. 파일이 `auto_trading` 폴더에 있는지 확인
3. 형식이 올바른지 확인 (공백, 따옴표 없이)
4. 프로그램 재시작

### 에러가 발생합니다

**에러별 해결:**
- `-301` 에러: [PASSWORD_ISSUE.md](../troubleshooting/PASSWORD_ISSUE.md)
- 로그인 실패: [TROUBLESHOOTING.md](../troubleshooting/TROUBLESHOOTING.md)
- 기타 문제: [FAQ.md](../troubleshooting/FAQ.md)

## 참고 자료

- [완전 설치 가이드](GETTING_STARTED.md)
- [빠른 시작](../guides/QUICKSTART.md)
- [계좌 비밀번호 문제](../troubleshooting/PASSWORD_ISSUE.md)
- [전체 문서](../README.md)

