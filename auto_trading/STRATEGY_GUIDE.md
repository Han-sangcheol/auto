# 📊 매매 전략 가이드

자동매매 프로그램의 매매 전략 상세 설명 및 커스터마이징 가이드

## 📋 목차

- [전략 개요](#전략-개요)
- [개별 전략 설명](#개별-전략-설명)
- [통합 전략 (합의 알고리즘)](#통합-전략-합의-알고리즘)
- [전략 파라미터 조정](#전략-파라미터-조정)
- [백테스팅 가이드](#백테스팅-가이드)
- [성과 평가](#성과-평가)

## 전략 개요

이 프로그램은 3가지 검증된 기술적 분석 전략을 조합하여 사용합니다:

1. **이동평균선 크로스오버** - 추세 추종 전략
2. **RSI** - 과매수/과매도 전략
3. **MACD** - 모멘텀 전략

각 전략이 독립적으로 매매 신호를 생성하고, **합의 알고리즘**을 통해 최종 결정을 내립니다.

## 개별 전략 설명

### 1. 이동평균선 크로스오버 전략

#### 원리
이동평균선(Moving Average)은 일정 기간의 평균 가격을 계산하여 추세를 파악하는 지표입니다.

#### 매매 규칙

**매수 신호 (골든크로스)**:
```
단기 이동평균선(5일)이 장기 이동평균선(20일)을 상향 돌파
→ 상승 추세 시작으로 판단 → 매수
```

**매도 신호 (데드크로스)**:
```
단기 이동평균선(5일)이 장기 이동평균선(20일)을 하향 돌파
→ 하락 추세 시작으로 판단 → 매도
```

#### 장단점

**장점**:
- ✅ 명확한 신호
- ✅ 큰 추세 포착에 유리
- ✅ 단순하고 이해하기 쉬움

**단점**:
- ❌ 횡보장에서 잦은 거짓 신호
- ❌ 후행 지표 (신호가 늦음)
- ❌ 급격한 변동에 민감하지 않음

#### 파라미터
```env
MA_SHORT_PERIOD=5    # 단기 이동평균 (일)
MA_LONG_PERIOD=20    # 장기 이동평균 (일)
```

**조정 가이드**:
- **보수적**: 5일/60일 → 신호 횟수 감소, 신뢰도 증가
- **공격적**: 3일/10일 → 신호 횟수 증가, 거짓 신호 위험
- **추천**: 5일/20일 (기본값)

### 2. RSI (Relative Strength Index) 전략

#### 원리
RSI는 가격의 상승/하락 강도를 0~100 사이의 값으로 나타내는 지표입니다.

#### 매매 규칙

**매수 신호**:
```
RSI < 30 (과매도 구간) + RSI 상승 반전
→ 과도하게 팔렸다가 반등하는 구간 → 매수
```

**매도 신호**:
```
RSI > 70 (과매수 구간) + RSI 하락 반전
→ 과도하게 올랐다가 하락하는 구간 → 매도
```

#### RSI 값 해석
```
80~100: 극심한 과매수 (매도 고려)
70~80:  과매수 (주의)
30~70:  정상 구간
20~30:  과매도 (주의)
0~20:   극심한 과매도 (매수 고려)
```

#### 장단점

**장점**:
- ✅ 과매수/과매도 명확히 표시
- ✅ 추세와 무관하게 작동
- ✅ 단기 매매에 유리

**단점**:
- ❌ 강한 추세에서 오랜 기간 극단값 유지
- ❌ 다이버전스 해석 필요
- ❌ 단독 사용 시 위험

#### 파라미터
```env
RSI_PERIOD=14        # RSI 계산 기간 (일)
RSI_OVERSOLD=30      # 과매도 기준
RSI_OVERBOUGHT=70    # 과매수 기준
```

**조정 가이드**:
- **보수적**: 과매도 20 / 과매수 80 → 극단적 신호만
- **공격적**: 과매도 40 / 과매수 60 → 민감한 반응
- **추천**: 30/70 (기본값)

### 3. MACD 전략

#### 원리
MACD는 두 개의 이동평균선 차이를 이용하여 모멘텀과 추세를 동시에 파악합니다.

#### 구성 요소
```
MACD선 = 12일 EMA - 26일 EMA
시그널선 = MACD선의 9일 EMA
히스토그램 = MACD선 - 시그널선
```

#### 매매 규칙

**매수 신호**:
```
MACD선이 시그널선을 상향 돌파 (히스토그램 > 0)
→ 상승 모멘텀 발생 → 매수
```

**매도 신호**:
```
MACD선이 시그널선을 하향 돌파 (히스토그램 < 0)
→ 하락 모멘텀 발생 → 매도
```

#### 장단점

**장점**:
- ✅ 추세와 모멘텀 동시 파악
- ✅ 다이버전스로 추가 정보
- ✅ 널리 사용되어 신뢰도 높음

**단점**:
- ❌ 후행 지표
- ❌ 횡보장에서 불안정
- ❌ 급격한 변동에 늦게 반응

#### 파라미터
```env
MACD_FAST=12         # 빠른 EMA (일)
MACD_SLOW=26         # 느린 EMA (일)
MACD_SIGNAL=9        # 시그널 EMA (일)
```

**조정 가이드**:
- **단기**: 8/17/6 → 빠른 반응
- **장기**: 19/39/15 → 안정적 신호
- **추천**: 12/26/9 (표준값)

## 통합 전략 (합의 알고리즘)

### 작동 방식

1. **개별 신호 생성**: 각 전략이 독립적으로 신호 생성
   ```
   이동평균선: 매수
   RSI: 관망
   MACD: 매수
   ```

2. **신호 집계**: 각 신호의 개수 계산
   ```
   매수: 2개
   매도: 0개
   관망: 1개
   ```

3. **최종 결정**: 기준 이상의 신호가 있으면 실행
   ```
   MIN_SIGNAL_STRENGTH = 2 (기본값)
   매수 신호 2개 ≥ 2 → 매수 실행
   ```

### 합의 규칙

```env
MIN_SIGNAL_STRENGTH=2    # 최소 신호 강도
```

**설정값 의미**:
- `1`: 1개 전략만 신호 발생해도 실행 (공격적)
- `2`: 2개 이상 전략이 동의해야 실행 (추천)
- `3`: 3개 모두 동의해야 실행 (보수적)

### 장점

1. **신뢰도 향상**: 여러 전략의 합의로 거짓 신호 감소
2. **리스크 분산**: 한 전략의 약점을 다른 전략이 보완
3. **다양한 시장 대응**: 각 전략이 다른 시장 상황에 강점

### 예시

#### 예시 1: 명확한 상승 추세
```
시간: 10:30
종목: 삼성전자 (005930)
현재가: 75,000원

[이동평균선 전략]
- 단기 MA(5): 74,500원
- 장기 MA(20): 73,000원
- 골든크로스 발생 → 매수 ✅

[RSI 전략]
- RSI: 65
- 정상 구간, 반전 없음 → 관망 ⏸️

[MACD 전략]
- 히스토그램: +150
- MACD선이 시그널선 상향 돌파 → 매수 ✅

[최종 결정]
매수 신호: 2개 ≥ MIN_SIGNAL_STRENGTH(2)
→ 매수 주문 실행 🚀
```

#### 예시 2: 불확실한 상황
```
시간: 14:00
종목: SK하이닉스 (000660)
현재가: 140,000원

[이동평균선 전략]
- 단기/장기 MA 교차 없음 → 관망 ⏸️

[RSI 전략]
- RSI: 75 (과매수)
- RSI 하락 반전 → 매도 ❌

[MACD 전략]
- 히스토그램: +50 (양수 유지)
- 교차 없음 → 관망 ⏸️

[최종 결정]
매도 신호: 1개 < MIN_SIGNAL_STRENGTH(2)
→ 주문 없음, 관망 유지 ⏸️
```

## 전략 파라미터 조정

### 상황별 권장 설정

#### 1. 보수적 투자자
```env
# 이동평균선: 장기 추세 중시
MA_SHORT_PERIOD=10
MA_LONG_PERIOD=60

# RSI: 극단적 신호만
RSI_OVERSOLD=20
RSI_OVERBOUGHT=80

# MACD: 장기 모멘텀
MACD_FAST=19
MACD_SLOW=39
MACD_SIGNAL=15

# 합의: 높은 합의 필요
MIN_SIGNAL_STRENGTH=3
```

**특징**:
- 신호 횟수: 매우 적음
- 신뢰도: 매우 높음
- 적합: 안정적 수익 추구

#### 2. 균형 투자자 (기본값)
```env
# 이동평균선: 중기 추세
MA_SHORT_PERIOD=5
MA_LONG_PERIOD=20

# RSI: 표준 설정
RSI_OVERSOLD=30
RSI_OVERBOUGHT=70

# MACD: 표준 설정
MACD_FAST=12
MACD_SLOW=26
MACD_SIGNAL=9

# 합의: 다수결
MIN_SIGNAL_STRENGTH=2
```

**특징**:
- 신호 횟수: 적당함
- 신뢰도: 높음
- 적합: 대부분의 투자자

#### 3. 공격적 투자자
```env
# 이동평균선: 단기 추세
MA_SHORT_PERIOD=3
MA_LONG_PERIOD=10

# RSI: 민감한 반응
RSI_OVERSOLD=40
RSI_OVERBOUGHT=60

# MACD: 단기 모멘텀
MACD_FAST=8
MACD_SLOW=17
MACD_SIGNAL=6

# 합의: 낮은 합의
MIN_SIGNAL_STRENGTH=1
```

**특징**:
- 신호 횟수: 매우 많음
- 신뢰도: 낮음 (거짓 신호 증가)
- 적합: 고위험 고수익 추구 (비추천)

### 시장 상황별 조정

#### 상승장 (Bull Market)
```env
# 추세 추종 강화
MA_SHORT_PERIOD=5
MA_LONG_PERIOD=20

# RSI 과매수 여유
RSI_OVERBOUGHT=75    # 높게 설정

# 신호 강도 완화
MIN_SIGNAL_STRENGTH=2
```

#### 하락장 (Bear Market)
```env
# 단기 변동 포착
MA_SHORT_PERIOD=3
MA_LONG_PERIOD=15

# RSI 과매도 엄격
RSI_OVERSOLD=25      # 낮게 설정

# 신호 강도 강화
MIN_SIGNAL_STRENGTH=3
```

#### 횡보장 (Sideways Market)
```env
# RSI 중심 전략
RSI_OVERSOLD=35
RSI_OVERBOUGHT=65

# 이동평균선 덜 민감하게
MA_SHORT_PERIOD=10
MA_LONG_PERIOD=30

MIN_SIGNAL_STRENGTH=2
```

## 백테스팅 가이드

백테스팅은 과거 데이터로 전략을 검증하는 과정입니다.

### 백테스팅 준비 (향후 구현)

```python
# 백테스팅 예시 코드 (향후 추가 예정)
backtest_period = "2023-01-01 ~ 2023-12-31"
initial_capital = 10_000_000  # 1천만원

results = run_backtest(
    strategies=create_default_strategies(Config),
    period=backtest_period,
    initial_capital=initial_capital
)
```

### 평가 지표

1. **총 수익률**: 전체 기간 수익률
2. **연간 수익률**: 1년 기준 환산 수익률
3. **최대 손실폭(MDD)**: 최대 손실 비율
4. **샤프 비율**: 위험 대비 수익률
5. **승률**: 수익 거래 / 전체 거래
6. **손익비**: 평균 수익 / 평균 손실

## 성과 평가

### 실전 투자 성과 확인

프로그램 실행 중 또는 종료 시 다음 정보를 확인할 수 있습니다:

```
리스크 관리자 현황
============================================================
초기 자금:          10,000,000원
현금 잔고:           9,250,000원
주식 평가:             850,000원
총 평가액:          10,100,000원
총 손익:              +100,000원 (+1.00%)

총 거래:                     10건
매도 거래:                    5건
승리 거래:                    3건
승률:                      60.0%

보유 종목:                    2개 (최대 3개)
============================================================
```

### 좋은 성과의 기준

| 지표 | 목표 | 우수 |
|------|------|------|
| 승률 | 50% 이상 | 60% 이상 |
| 연 수익률 | 10% 이상 | 20% 이상 |
| 최대 손실폭 | -20% 이내 | -10% 이내 |

### 성과 개선 팁

1. **충분한 테스트 기간**: 최소 1개월 이상
2. **다양한 종목**: 여러 섹터에 분산
3. **파라미터 최적화**: 시장 상황에 맞게 조정
4. **로그 분석**: 거래 내역 검토하여 개선점 찾기

## 추가 전략 구현

향후 추가 가능한 전략:

1. **볼린저 밴드 전략**
2. **스토캐스틱 전략**
3. **일목균형표 전략**
4. **패턴 인식 (머신러닝)**

---

**업데이트**: 2025년 10월 16일  
**버전**: 1.0.0

