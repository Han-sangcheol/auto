# 단타 매매 실시간 모니터링 가이드

**날짜**: 2025-10-27  
**목적**: 단타 매매에서 매수/매도 시점을 실시간으로 확인하는 방법  
**상태**: ✅ 완료

---

## 📋 개요

단타 매매는 **빠른 의사결정**과 **실시간 모니터링**이 핵심입니다.  
이 시스템은 매수/매도 신호를 **10초마다 체크**하고, 체결 즉시 명확한 로그를 출력합니다.

---

## 🚀 단타 매매 최적화

### 변경 사항 (2025-10-27)

| 항목 | 변경 전 | 변경 후 | 효과 |
|------|---------|---------|------|
| **신호 체크 주기** | 60초 (1분) | 10초 | 6배 빠른 반응 |
| **실시간 가격 표시** | 10번째 업데이트마다 | 5번째 업데이트마다 | 2배 많은 정보 |
| **매수/매도 로그** | 단순 | 상세 (시각, 금액, 사유) | 명확한 추적 |
| **손절/익절 로그** | 간단 | 상세 (시각, 손익률) | 리스크 관리 강화 |

---

## 📊 실시간 모니터링 예시

### 1. 실시간 가격 업데이트

```
2025-10-27 09:15:23 | INFO  | 📊 실시간: 005930 73,500원 (+1.23%) | 데이터: 45개
2025-10-27 09:15:28 | INFO  | 📊 실시간: 005930 73,600원 (+1.37%) | 데이터: 50개
2025-10-27 09:15:33 | INFO  | 📊 실시간: 005930 73,700원 (+1.50%) | 데이터: 55개
```

**설명**:
- 5번째 업데이트마다 가격 표시
- 변동률과 누적 데이터 수 표시
- 단타에 적합한 빠른 업데이트

---

### 2. 매수 신호 발생 및 체결

```
======================================================================
🔔 매수 신호 발생! 005930
   현재가: 73,700원
   신호 강도: 2.50
   사유: 이동평균선 골든크로스, RSI 상승 반전
======================================================================

2025-10-27 09:15:35 | INFO  | 📈 매수 시도: 005930 13주 @ 73,700원 | 신호 강도: 2.50

======================================================================
✅ 매수 체결 완료!
   종목: 005930
   수량: 13주
   체결가: 73,700원
   총 금액: 958,100원
   사유: 이동평균선 골든크로스, RSI 상승 반전
   시각: 09:15:36
======================================================================
```

**특징**:
- 🔔 신호 발생 즉시 명확한 알림
- 신호 강도와 사유 표시
- 체결 완료 시 상세 정보 (금액, 시각)

---

### 3. 매도 신호 발생 및 체결

```
======================================================================
🔔 매도 신호 발생! 005930
   현재가: 75,200원
   신호 강도: 2.00
   사유: MACD 데드크로스, RSI 과매수
======================================================================

2025-10-27 09:27:15 | INFO  | 📉 매도 시도: 005930 13주 @ 75,200원 | 신호 강도: 2.00

======================================================================
✅ 매도 체결 완료!
   종목: 005930
   수량: 13주
   매수가: 73,700원
   매도가: 75,200원
   총 금액: 977,600원
   손익: +19,500원 (+2.04%)
   사유: MACD 데드크로스, RSI 과매수
   시각: 09:27:16
======================================================================
```

**특징**:
- 매수가와 매도가 비교
- 손익 금액과 수익률 표시
- 매매 시각 명확히 기록

---

### 4. 손절매 (자동)

```
======================================================================
🚨 손절매 조건 감지!
   종목: 000660
   매수가: 130,000원
   현재가: 123,500원
   손실률: -5.00%
   시각: 09:45:23
======================================================================

======================================================================
❌ 청산 체결 완료! (손절매)
   종목: 000660
   수량: 7주
   매수가: 130,000원
   매도가: 123,500원
   총 금액: 864,500원
   손익: -45,500원 (-5.00%)
   사유: 손절매
   시각: 09:45:24
======================================================================
```

**특징**:
- 🚨 손절매 조건 즉시 감지
- 손실률 명확히 표시
- 자동으로 청산 실행

---

### 5. 익절매 (자동)

```
======================================================================
🎯 익절매 조건 감지!
   종목: 035720
   매수가: 52,000원
   현재가: 57,200원
   수익률: +10.00%
   시각: 10:12:45
======================================================================

======================================================================
✅ 청산 체결 완료! (익절매)
   종목: 035720
   수량: 19주
   매수가: 52,000원
   매도가: 57,200원
   총 금액: 1,086,800원
   손익: +98,800원 (+10.00%)
   사유: 익절매
   시각: 10:12:46
======================================================================
```

**특징**:
- 🎯 익절매 목표 달성 즉시 감지
- 수익률 명확히 표시
- 자동으로 이익 실현

---

## 🔍 실시간 모니터링 방법

### 방법 1: 콘솔 로그 (실시간)

프로그램 실행 시 콘솔에서 실시간으로 확인:

```powershell
cd auto_trading
python main.py
```

**장점**:
- ✅ 실시간 즉시 확인
- ✅ 색상 코딩 (INFO, WARNING, SUCCESS, ERROR)
- ✅ 매수/매도 즉시 알림

**단점**:
- ❌ 콘솔 창이 가려지면 확인 불가
- ❌ 스크롤이 빠르게 지나감

---

### 방법 2: 로그 파일 (이력 확인)

날짜별 로그 파일 확인:

```powershell
# 오늘 로그 확인
notepad auto_trading\logs\trading_2025-10-27.log

# 또는 실시간 추적 (PowerShell)
Get-Content auto_trading\logs\trading.log -Wait -Tail 50
```

**장점**:
- ✅ 전체 이력 확인 가능
- ✅ 검색 및 분석 가능
- ✅ 날짜별 정리

**단점**:
- ❌ 실시간성 약간 떨어짐

---

### 방법 3: 로그 필터링 (핵심 정보만)

PowerShell에서 매수/매도만 필터링:

```powershell
# 매수/매도만 확인
Get-Content auto_trading\logs\trading.log | Select-String "매수 체결|매도 체결|청산 체결"

# 손익만 확인
Get-Content auto_trading\logs\trading.log | Select-String "손익:"

# 급등주만 확인
Get-Content auto_trading\logs\trading.log | Select-String "급등 감지"
```

**장점**:
- ✅ 핵심 정보만 빠르게 확인
- ✅ 분석 및 통계 용이

---

## ⚙️ 설정 최적화

### 단타 매매 권장 설정

`.env` 파일:

```ini
# 최대 보유 종목 수 (단타는 적게)
MAX_STOCKS=2

# 종목당 투자 비율 (단타는 크게)
POSITION_SIZE_PERCENT=15

# 손절매 비율 (단타는 타이트하게)
STOP_LOSS_PERCENT=3

# 익절매 비율 (단타는 빠르게)
TAKE_PROFIT_PERCENT=5

# 일일 손실 한도 (단타는 여유있게)
DAILY_LOSS_LIMIT_PERCENT=5

# 신호 강도 (단타는 민감하게)
MIN_SIGNAL_STRENGTH=2
```

**설명**:
- **MAX_STOCKS=2**: 집중 투자 (2개 종목만)
- **POSITION_SIZE_PERCENT=15**: 한 종목에 15% 투자
- **STOP_LOSS_PERCENT=3**: 3% 손실 시 즉시 청산
- **TAKE_PROFIT_PERCENT=5**: 5% 수익 시 즉시 청산
- **MIN_SIGNAL_STRENGTH=2**: 2개 전략 동의 시 매매

---

## 📈 성과 확인

### 일일 성과 요약

로그 파일에서 자동으로 요약:

```powershell
$log = Get-Content auto_trading\logs\trading_2025-10-27.log
$buys = ($log | Select-String "매수 체결 완료").Count
$sells = ($log | Select-String "매도 체결 완료").Count
$profits = $log | Select-String "손익: \+\d+"
$losses = $log | Select-String "손익: -\d+"

Write-Host "=== 오늘의 매매 현황 ==="
Write-Host "매수 체결: $buys 건"
Write-Host "매도 체결: $sells 건"
Write-Host "수익 거래: $($profits.Count) 건"
Write-Host "손실 거래: $($losses.Count) 건"
```

---

## 🚨 주의사항

### 단타 매매 리스크

1. **높은 거래 빈도**
   - 신호 체크 주기가 10초로 짧음
   - 변동성 큰 장에서 과도한 매매 발생 가능

2. **슬리피지 (Slippage)**
   - 시장가 주문 사용
   - 체결가와 예상가 차이 발생 가능

3. **수수료 누적**
   - 빈번한 매매로 수수료 부담
   - 손익 계산 시 수수료 고려 필요

4. **심리적 부담**
   - 실시간 모니터링 필요
   - 빠른 의사결정 스트레스

---

## 💡 팁

### 효과적인 모니터링

1. **듀얼 모니터 활용**
   - 한쪽: 차트 (키움 HTS)
   - 다른쪽: 자동매매 프로그램 콘솔

2. **알림 설정**
   - 매수/매도 시 소리 알림 (향후 기능)
   - 중요 이벤트 카카오톡 알림 (향후 기능)

3. **정기적 체크**
   - 5분마다 자동 상태 요약 확인
   - 1분마다 하트비트 확인

4. **백테스트 활용**
   - 과거 로그 분석
   - 전략 성과 평가
   - 설정값 최적화

---

## 🔧 트러블슈팅

### 신호가 너무 많이 발생

**원인**: 신호 강도 설정이 낮음

**해결**:
```ini
MIN_SIGNAL_STRENGTH=3  # 3개 전략 모두 동의 필요
```

---

### 신호가 거의 발생하지 않음

**원인**: 신호 강도 설정이 높거나, 시장 상황

**해결**:
```ini
MIN_SIGNAL_STRENGTH=1  # 1개 전략만 동의해도 매매
```

또는:
- 관심 종목 수 늘리기
- 급등주 감지 활성화

---

### 로그가 너무 많아서 확인이 어려움

**해결**:
```powershell
# 핵심 정보만 필터링
Get-Content auto_trading\logs\trading.log -Wait | Select-String "체결 완료"
```

---

## 📊 실시간 모니터링 체크리스트

### 프로그램 시작 시

- [ ] 콘솔 로그가 정상적으로 출력되는가?
- [ ] 키움 Open API 로그인 성공했는가?
- [ ] 실시간 시세가 수신되고 있는가?
- [ ] 관심 종목이 정상적으로 등록되었는가?
- [ ] 급등주 감지가 활성화되었는가?

### 매매 중

- [ ] 1분마다 하트비트(💓)가 표시되는가?
- [ ] 실시간 가격이 업데이트되는가?
- [ ] 매수/매도 신호가 명확히 표시되는가?
- [ ] 체결 완료 로그가 상세히 나오는가?
- [ ] 손익이 정확히 계산되는가?

### 종료 후

- [ ] 오늘 로그 파일이 생성되었는가?
- [ ] 모든 매매 내역이 기록되었는가?
- [ ] 손익 계산이 정확한가?
- [ ] 다음 날을 위한 설정 조정이 필요한가?

---

## 🎯 실전 예시

### 시나리오: 삼성전자 단타 매매

```
09:15:35 | 📊 실시간: 005930 73,500원 (+1.23%)
09:15:40 | 📊 실시간: 005930 73,600원 (+1.37%)
09:15:45 | 📊 실시간: 005930 73,700원 (+1.50%)

======================================================================
🔔 매수 신호 발생! 005930
   현재가: 73,700원
   신호 강도: 2.50
   사유: 이동평균선 골든크로스, RSI 상승 반전
======================================================================

======================================================================
✅ 매수 체결 완료!
   종목: 005930
   수량: 13주
   체결가: 73,700원
   총 금액: 958,100원
   시각: 09:15:46
======================================================================

09:20:15 | 📊 실시간: 005930 74,200원 (+1.91%)
09:23:30 | 📊 실시간: 005930 74,800원 (+2.73%)
09:26:45 | 📊 실시간: 005930 75,200원 (+3.28%)

======================================================================
🔔 매도 신호 발생! 005930
   현재가: 75,200원
   신호 강도: 2.00
   사유: MACD 데드크로스
======================================================================

======================================================================
✅ 매도 체결 완료!
   종목: 005930
   수량: 13주
   매수가: 73,700원
   매도가: 75,200원
   총 금액: 977,600원
   손익: +19,500원 (+2.04%)
   시각: 09:26:46
======================================================================
```

**결과**:
- ⏱️ 보유 시간: 11분 (09:15 ~ 09:26)
- 💰 수익: +19,500원 (+2.04%)
- ✅ 단타 매매 성공!

---

## 🎉 결론

### 단타 매매 실시간 모니터링 핵심

1. ✅ **10초마다 신호 체크** - 빠른 반응
2. ✅ **5번째마다 가격 표시** - 충분한 정보
3. ✅ **명확한 알림 로그** - 놓치지 않음
4. ✅ **상세한 체결 정보** - 정확한 추적
5. ✅ **자동 손절/익절** - 리스크 관리

### 권장 모니터링 환경

- 듀얼 모니터 (HTS + 자동매매)
- 콘솔 실시간 확인
- 로그 파일 이력 분석
- 5분마다 상태 요약 체크

---

**작성**: CleonAI 개발팀  
**날짜**: 2025-10-27  
**버전**: v1.3  
**상태**: ✅ 완료

**단타 매매에 최적화된 실시간 모니터링 시스템!**

언제 매수하고 언제 매도하는지 명확하게 확인할 수 있습니다.

