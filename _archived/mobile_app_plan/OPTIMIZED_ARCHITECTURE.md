# ğŸš€ ìµœì í™”ëœ ëª¨ë°”ì¼ ì—°ë™ ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

### ëª©í‘œ
- Windows ê¸°ë°˜ 1ì°¨ ê°œë°œ (ì„œë²„ + ìë™ë§¤ë§¤ ê¸°ëŠ¥)
- í–¥í›„ ëª¨ë°”ì¼ ì—°ë™ì´ ìš©ì´í•œ í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°
- ê¸°ëŠ¥ë³„ ëª¨ë“ˆí™”ë¥¼ í†µí•œ ìœ ì§€ë³´ìˆ˜ì„± ê·¹ëŒ€í™”
- ê¸ˆìœµê¸‰ ë³´ì•ˆ ì²´ê³„ êµ¬ì¶•

### í•µì‹¬ ì°¨ë³„í™” ìš”ì†Œ
- **ê³„ì¸µí™”ëœ ëª¨ë“ˆ êµ¬ì¡°**: ë…ë¦½ì ì¸ ê¸°ëŠ¥ ëª¨ë“ˆë“¤ì˜ ì¡°í•©
- **API-First ì„¤ê³„**: ëª¨ë°”ì¼ ì•± ì—°ë™ì„ ìœ„í•œ RESTful API ìš°ì„  ì„¤ê³„
- **ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬**: WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ í†µì‹ 
- **í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜**: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì§€í–¥ ì„¤ê³„

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°ë„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ“± ëª¨ë°”ì¼ ì•±   â”‚    â”‚  ğŸ–¥ï¸ Windows     â”‚    â”‚  ğŸ”„ ì‹¤ì‹œê°„      â”‚
â”‚   (í–¥í›„ ê°œë°œ)   â”‚â—„â”€â”€â–ºâ”‚   ë°±ì—”ë“œ ì„œë²„    â”‚â—„â”€â”€â–ºâ”‚  ë°ì´í„° ìˆ˜ì§‘ê¸°  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Flutter UI    â”‚    â”‚ â€¢ API Gateway   â”‚    â”‚ â€¢ í‚¤ì›€ API      â”‚
â”‚ â€¢ ì‹¤ì‹œê°„ ì°¨íŠ¸    â”‚    â”‚ â€¢ ì¸ì¦/ê¶Œí•œ     â”‚    â”‚ â€¢ ì‹œì„¸ ìˆ˜ì§‘     â”‚
â”‚ â€¢ í‘¸ì‹œ ì•Œë¦¼     â”‚    â”‚ â€¢ ìë™ë§¤ë§¤ ì—”ì§„  â”‚    â”‚ â€¢ ì‹¤ì‹œê°„ ì²˜ë¦¬   â”‚
â”‚ â€¢ ì„¤ì • ê´€ë¦¬     â”‚    â”‚ â€¢ ë°ì´í„°ë² ì´ìŠ¤  â”‚    â”‚ â€¢ ì•Œë¦¼ ë°œì†¡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚                        â”‚
        â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” ë³´ì•ˆ ê³„ì¸µ   â”‚    â”‚ ğŸ’¾ ë°ì´í„° ì €ì¥   â”‚    â”‚ ğŸ“Š ë¶„ì„ ì—”ì§„    â”‚
â”‚  (ì¸ì¦/ì•”í˜¸í™”)  â”‚    â”‚ (MongoDB+Redis) â”‚    â”‚ (ë°±í…ŒìŠ¤íŒ…)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—‚ï¸ ëª¨ë“ˆë³„ íŒŒì¼ êµ¬ì¡°

### 1. í•µì‹¬ ì„œë²„ ëª¨ë“ˆ (Windows ê¸°ë°˜)

```
CleonAI-TradingSystem/
â”œâ”€â”€ ğŸ“ core/                          # í•µì‹¬ ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ server.js                     # ë©”ì¸ ì„œë²„ (Express)
â”‚   â”œâ”€â”€ config.js                     # ì„¤ì • ê´€ë¦¬
â”‚   â”œâ”€â”€ database.js                   # DB ì—°ê²° ê´€ë¦¬
â”‚   â””â”€â”€ logger.js                     # ë¡œê¹… ì‹œìŠ¤í…œ
â”‚
â”œâ”€â”€ ğŸ“ modules/                       # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ ğŸ“ auth/                      # ì¸ì¦ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ auth-controller.js        # ì¸ì¦ ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ auth-service.js           # ì¸ì¦ ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ auth-middleware.js        # ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ trading/                   # ìë™ë§¤ë§¤ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ trading-engine.js         # ë§¤ë§¤ ì—”ì§„
â”‚   â”‚   â”œâ”€â”€ strategy-manager.js       # ì „ëµ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ risk-manager.js           # ë¦¬ìŠ¤í¬ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ order-processor.js        # ì£¼ë¬¸ ì²˜ë¦¬
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ market/                    # ì‹œì¥ ë°ì´í„° ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ data-collector.js         # ë°ì´í„° ìˆ˜ì§‘
â”‚   â”‚   â”œâ”€â”€ realtime-handler.js       # ì‹¤ì‹œê°„ ì²˜ë¦¬
â”‚   â”‚   â””â”€â”€ market-analyzer.js        # ì‹œì¥ ë¶„ì„
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ account/                   # ê³„ì¢Œ ê´€ë¦¬ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ account-controller.js     # ê³„ì¢Œ ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ balance-service.js        # ì”ê³  ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ position-manager.js       # í¬ì§€ì…˜ ê´€ë¦¬
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ notification/              # ì•Œë¦¼ ëª¨ë“ˆ
â”‚       â”œâ”€â”€ notification-service.js   # ì•Œë¦¼ ì„œë¹„ìŠ¤
â”‚       â”œâ”€â”€ email-sender.js           # ì´ë©”ì¼ ë°œì†¡
â”‚       â””â”€â”€ sms-sender.js             # SMS ë°œì†¡
â”‚
â”œâ”€â”€ ğŸ“ api/                           # API ë¼ìš°í„°
â”‚   â”œâ”€â”€ routes/                       # API ë¼ìš°íŠ¸
â”‚   â”‚   â”œâ”€â”€ auth-routes.js
â”‚   â”‚   â”œâ”€â”€ trading-routes.js
â”‚   â”‚   â”œâ”€â”€ market-routes.js
â”‚   â”‚   â””â”€â”€ account-routes.js
â”‚   â””â”€â”€ middleware/                   # API ë¯¸ë“¤ì›¨ì–´
â”‚       â”œâ”€â”€ cors.js
â”‚       â”œâ”€â”€ rate-limit.js
â”‚       â””â”€â”€ validation.js
â”‚
â”œâ”€â”€ ğŸ“ kiwoom/                        # í‚¤ì›€ API ì—°ë™
â”‚   â”œâ”€â”€ kiwoom-api.py                 # Python API ë˜í¼
â”‚   â”œâ”€â”€ kiwoom-bridge.js              # Node.js ë¸Œë¦¬ì§€
â”‚   â””â”€â”€ data-parser.js                # ë°ì´í„° íŒŒì„œ
â”‚
â”œâ”€â”€ ğŸ“ database/                      # ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”œâ”€â”€ models/                       # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ user.js
â”‚   â”‚   â”œâ”€â”€ stock.js
â”‚   â”‚   â”œâ”€â”€ order.js
â”‚   â”‚   â””â”€â”€ trading-log.js
â”‚   â””â”€â”€ migrations/                   # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚
â”œâ”€â”€ ğŸ“ utils/                         # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ crypto.js                     # ì•”í˜¸í™”
â”‚   â”œâ”€â”€ validator.js                  # ê²€ì¦
â”‚   â””â”€â”€ formatter.js                  # ë°ì´í„° í¬ë§·íŒ…
â”‚
â”œâ”€â”€ ğŸ“ tests/                         # í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ unit/                         # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ integration/                  # í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ e2e/                          # E2E í…ŒìŠ¤íŠ¸
â”‚
â”œâ”€â”€ ğŸ“ docs/                          # ë¬¸ì„œ
â”‚   â”œâ”€â”€ api-docs.md                   # API ë¬¸ì„œ
â”‚   â”œâ”€â”€ development-guide.md          # ê°œë°œ ê°€ì´ë“œ
â”‚   â””â”€â”€ deployment-guide.md           # ë°°í¬ ê°€ì´ë“œ
â”‚
â”œâ”€â”€ package.json                      # Node.js íŒ¨í‚¤ì§€
â”œâ”€â”€ requirements.txt                  # Python íŒ¨í‚¤ì§€
â”œâ”€â”€ docker-compose.yml               # Docker ì„¤ì •
â””â”€â”€ README.md                        # í”„ë¡œì íŠ¸ ì„¤ëª…
```

### 2. ëª¨ë°”ì¼ ì•± êµ¬ì¡° (í–¥í›„ ê°œë°œ)

```
mobile-app/
â”œâ”€â”€ ğŸ“ lib/
â”‚   â”œâ”€â”€ ğŸ“ core/                      # í•µì‹¬ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ api/                      # API í†µì‹ 
â”‚   â”‚   â”œâ”€â”€ config/                   # ì„¤ì •
â”‚   â”‚   â””â”€â”€ utils/                    # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ features/                  # ê¸°ëŠ¥ë³„ í™”ë©´
â”‚   â”‚   â”œâ”€â”€ ğŸ“ auth/                  # ì¸ì¦
â”‚   â”‚   â”œâ”€â”€ ğŸ“ dashboard/             # ëŒ€ì‹œë³´ë“œ
â”‚   â”‚   â”œâ”€â”€ ğŸ“ trading/               # ë§¤ë§¤
â”‚   â”‚   â””â”€â”€ ğŸ“ settings/              # ì„¤ì •
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ shared/                    # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ widgets/                  # ìœ„ì ¯
â”‚   â”‚   â””â”€â”€ providers/                # ìƒíƒœ ê´€ë¦¬
â”‚   â”‚
â”‚   â””â”€â”€ main.dart                     # ì•± ì§„ì…ì 
â”‚
â”œâ”€â”€ android/                          # Android ì„¤ì •
â”œâ”€â”€ ios/                              # iOS ì„¤ì •
â””â”€â”€ pubspec.yaml                      # Flutter íŒ¨í‚¤ì§€
```

## ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### MongoDB ìŠ¤í‚¤ë§ˆ ì„¤ê³„

#### 1. ì‚¬ìš©ì ì •ë³´ (users)
```javascript
{
  _id: ObjectId,
  email: String,                      // ì´ë©”ì¼ (ë¡œê·¸ì¸ ID)
  passwordHash: String,               // ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸
  name: String,                       // ì‚¬ìš©ì ì´ë¦„
  phone: String,                      // ì „í™”ë²ˆí˜¸ (ì•”í˜¸í™”)
  accountInfo: {                      // ì¦ê¶Œê³„ì¢Œ ì •ë³´ (ì•”í˜¸í™”)
    brokerage: String,                // ì¦ê¶Œì‚¬
    accountNumber: String,            // ê³„ì¢Œë²ˆí˜¸
    accountPassword: String           // ê³„ì¢Œë¹„ë°€ë²ˆí˜¸
  },
  settings: {                         // ê°œì¸ ì„¤ì •
    tradingEnabled: Boolean,          // ìë™ë§¤ë§¤ í™œì„±í™”
    riskLevel: Number,                // ìœ„í—˜ë„ (1-5)
    maxDailyLoss: Number,             // ì¼ì¼ ìµœëŒ€ ì†ì‹¤ì•¡
    notifications: {                  // ì•Œë¦¼ ì„¤ì •
      email: Boolean,
      sms: Boolean,
      push: Boolean
    }
  },
  permissions: [String],              // ê¶Œí•œ ëª©ë¡
  createdAt: Date,
  updatedAt: Date,
  lastLoginAt: Date
}
```

#### 2. ì£¼ì‹ ì •ë³´ (stocks)
```javascript
{
  _id: ObjectId,
  code: String,                       // ì¢…ëª©ì½”ë“œ (ì˜ˆ: 005930)
  name: String,                       // ì¢…ëª©ëª… (ì˜ˆ: ì‚¼ì„±ì „ì)
  market: String,                     // ì‹œì¥ (KOSPI, KOSDAQ)
  sector: String,                     // ì—…ì¢…
  currentPrice: Number,               // í˜„ì¬ê°€
  changeAmount: Number,               // ì „ì¼ëŒ€ë¹„ ë³€ë™ê¸ˆì•¡
  changeRate: Number,                 // ë³€ë™ë¥  (%)
  volume: Number,                     // ê±°ë˜ëŸ‰
  marketCap: Number,                  // ì‹œê°€ì´ì•¡
  per: Number,                        // PER
  pbr: Number,                        // PBR
  technicalIndicators: {              // ê¸°ìˆ ì  ì§€í‘œ
    sma20: Number,                    // 20ì¼ ì´ë™í‰ê· 
    sma60: Number,                    // 60ì¼ ì´ë™í‰ê· 
    rsi: Number,                      // RSI
    macd: {
      macd: Number,
      signal: Number,
      histogram: Number
    }
  },
  updatedAt: Date
}
```

#### 3. ì£¼ë¬¸ ì •ë³´ (orders)
```javascript
{
  _id: ObjectId,
  userId: ObjectId,                   // ì‚¬ìš©ì ID (ref: users)
  stockCode: String,                  // ì¢…ëª©ì½”ë“œ
  stockName: String,                  // ì¢…ëª©ëª…
  orderType: String,                  // ì£¼ë¬¸ìœ í˜• (BUY, SELL)
  orderMethod: String,                // ì£¼ë¬¸ë°©ë²• (MARKET, LIMIT)
  quantity: Number,                   // ì£¼ë¬¸ìˆ˜ëŸ‰
  price: Number,                      // ì£¼ë¬¸ê°€ê²©
  totalAmount: Number,                // ì´ ì£¼ë¬¸ê¸ˆì•¡
  status: String,                     // ìƒíƒœ (PENDING, FILLED, CANCELLED, REJECTED)
  filledQuantity: Number,             // ì²´ê²°ìˆ˜ëŸ‰
  filledPrice: Number,                // ì²´ê²°ê°€ê²©
  commission: Number,                 // ìˆ˜ìˆ˜ë£Œ
  tax: Number,                        // ì„¸ê¸ˆ
  strategy: String,                   // ë§¤ë§¤ì „ëµ
  reason: String,                     // ì£¼ë¬¸ ì‚¬ìœ 
  kiwoomOrderId: String,              // í‚¤ì›€ ì£¼ë¬¸ë²ˆí˜¸
  createdAt: Date,
  filledAt: Date,
  cancelledAt: Date
}
```

#### 4. í¬ì§€ì…˜ ì •ë³´ (positions)
```javascript
{
  _id: ObjectId,
  userId: ObjectId,                   // ì‚¬ìš©ì ID
  stockCode: String,                  // ì¢…ëª©ì½”ë“œ
  stockName: String,                  // ì¢…ëª©ëª…
  quantity: Number,                   // ë³´ìœ ìˆ˜ëŸ‰
  avgPrice: Number,                   // í‰ê· ë§¤ìˆ˜ê°€
  currentPrice: Number,               // í˜„ì¬ê°€
  totalCost: Number,                  // ì´ ë§¤ìˆ˜ê¸ˆì•¡
  currentValue: Number,               // í˜„ì¬ í‰ê°€ê¸ˆì•¡
  unrealizedPnL: Number,              // í‰ê°€ì†ìµ
  unrealizedPnLRate: Number,          // í‰ê°€ì†ìµë¥ 
  createdAt: Date,
  updatedAt: Date
}
```

#### 5. ë§¤ë§¤ ì „ëµ (strategies)
```javascript
{
  _id: ObjectId,
  userId: ObjectId,                   // ì‚¬ìš©ì ID
  name: String,                       // ì „ëµëª…
  description: String,                // ì „ëµ ì„¤ëª…
  type: String,                       // ì „ëµ ìœ í˜• (SMA, RSI, MACD, CUSTOM)
  parameters: {                       // ì „ëµ íŒŒë¼ë¯¸í„°
    buyConditions: [Object],          // ë§¤ìˆ˜ ì¡°ê±´
    sellConditions: [Object],         // ë§¤ë„ ì¡°ê±´
    riskManagement: {                 // ë¦¬ìŠ¤í¬ ê´€ë¦¬
      stopLoss: Number,               // ì†ì ˆë§¤ (%)
      takeProfit: Number,             // ìµì ˆë§¤ (%)
      maxPosition: Number             // ìµœëŒ€ í¬ì§€ì…˜ í¬ê¸°
    }
  },
  isActive: Boolean,                  // í™œì„±í™” ì—¬ë¶€
  performanceMetrics: {               // ì„±ê³¼ ì§€í‘œ
    totalTrades: Number,              // ì´ ê±°ë˜ ìˆ˜
    winRate: Number,                  // ìŠ¹ë¥ 
    avgProfit: Number,                // í‰ê·  ìˆ˜ìµë¥ 
    maxDrawdown: Number               // ìµœëŒ€ ë‚™í­
  },
  createdAt: Date,
  updatedAt: Date
}
```

#### 6. ê±°ë˜ ë¡œê·¸ (trading_logs)
```javascript
{
  _id: ObjectId,
  userId: ObjectId,                   // ì‚¬ìš©ì ID
  type: String,                       // ë¡œê·¸ íƒ€ì… (ORDER, SIGNAL, ERROR, SYSTEM)
  level: String,                      // ë¡œê·¸ ë ˆë²¨ (INFO, WARNING, ERROR)
  message: String,                    // ë¡œê·¸ ë©”ì‹œì§€
  data: Object,                       // ì¶”ê°€ ë°ì´í„°
  timestamp: Date
}
```

#### 7. ì‹œì„¸ ë°ì´í„° (price_history) - ì‹œê³„ì—´ ì»¬ë ‰ì…˜
```javascript
{
  _id: ObjectId,
  stockCode: String,                  // ì¢…ëª©ì½”ë“œ
  timestamp: Date,                    // ì‹œê°
  open: Number,                       // ì‹œê°€
  high: Number,                       // ê³ ê°€
  low: Number,                        // ì €ê°€
  close: Number,                      // ì¢…ê°€
  volume: Number,                     // ê±°ë˜ëŸ‰
  timeframe: String                   // ì‹œê°„ë‹¨ìœ„ (1m, 5m, 1h, 1d)
}
```

### Redis ìºì‹œ ì„¤ê³„

```javascript
// ìºì‹œ í‚¤ êµ¬ì¡°
const CACHE_KEYS = {
  // ì‹¤ì‹œê°„ ì£¼ê°€ (10ì´ˆ TTL)
  STOCK_PRICE: 'stock:price:{stockCode}',
  
  // ì‚¬ìš©ì ì„¸ì…˜ (30ë¶„ TTL)  
  USER_SESSION: 'session:{userId}',
  
  // ë§¤ë§¤ ì‹ í˜¸ (1ë¶„ TTL)
  TRADING_SIGNAL: 'signal:{stockCode}:{strategy}',
  
  // ì‹œì¥ ìƒíƒœ (5ë¶„ TTL)
  MARKET_STATUS: 'market:status',
  
  // API í˜¸ì¶œ ì œí•œ (1ì‹œê°„ TTL)
  API_RATE_LIMIT: 'rate:{userId}:{endpoint}'
};
```

## ğŸ”§ í•µì‹¬ ê¸°ëŠ¥ ëª¨ë“ˆ ì„¤ê³„

### 1. ìë™ë§¤ë§¤ ì—”ì§„ (trading-engine.js)
```javascript
/**
 * ğŸ¤– ìë™ë§¤ë§¤ ì—”ì§„
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * - ë§¤ë§¤ ì „ëµ ì‹¤í–‰
 * - ë¦¬ìŠ¤í¬ ê´€ë¦¬
 * - ì£¼ë¬¸ ì²˜ë¦¬
 * - ì„±ê³¼ ì¶”ì 
 */

class TradingEngine {
  constructor(userId, strategyId) {
    this.userId = userId;
    this.strategyId = strategyId;
    this.isRunning = false;
    this.positions = new Map();
    this.riskManager = new RiskManager(userId);
  }

  // ë§¤ë§¤ ì‹œì‘
  async start() {
    this.isRunning = true;
    logger.info(`ìë™ë§¤ë§¤ ì‹œì‘: ì‚¬ìš©ì ${this.userId}`);
    
    // ì‹¤ì‹œê°„ ë°ì´í„° êµ¬ë…
    await this.subscribeMarketData();
    
    // ë§¤ë§¤ ì „ëµ ì‹¤í–‰
    this.executeStrategy();
  }

  // ë§¤ë§¤ ì‹ í˜¸ ì²˜ë¦¬
  async processSignal(signal) {
    // ë¦¬ìŠ¤í¬ ê²€ì¦
    const riskCheck = await this.riskManager.validateSignal(signal);
    if (!riskCheck.isValid) {
      logger.warn(`ë¦¬ìŠ¤í¬ ê²€ì¦ ì‹¤íŒ¨: ${riskCheck.reason}`);
      return;
    }

    // ì£¼ë¬¸ ì‹¤í–‰
    await this.executeOrder(signal);
  }
}
```

### 2. ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì§‘ê¸° (data-collector.js)
```javascript
/**
 * ğŸ“Š ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì§‘ê¸°
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * - í‚¤ì›€ APIë¥¼ í†µí•œ ì‹œì„¸ ìˆ˜ì§‘
 * - ë°ì´í„° ì •ê·œí™” ë° ì €ì¥
 * - WebSocketì„ í†µí•œ ì‹¤ì‹œê°„ ì „ì†¡
 */

class DataCollector {
  constructor() {
    this.kiwoomAPI = new KiwoomAPI();
    this.redis = new Redis();
    this.mongodb = new MongoDB();
  }

  // ì‹¤ì‹œê°„ ì‹œì„¸ ìˆ˜ì§‘
  async collectRealTimeData(stockCodes) {
    for (const stockCode of stockCodes) {
      // í‚¤ì›€ APIì—ì„œ ì‹¤ì‹œê°„ ë°ì´í„° ìš”ì²­
      const priceData = await this.kiwoomAPI.getRealTimePrice(stockCode);
      
      // ë°ì´í„° ì •ê·œí™”
      const normalizedData = this.normalizeData(priceData);
      
      // Redis ìºì‹œì— ì €ì¥
      await this.redis.setex(
        `stock:price:${stockCode}`, 
        10, 
        JSON.stringify(normalizedData)
      );
      
      // MongoDBì— ì´ë ¥ ì €ì¥
      await this.mongodb.collection('price_history').insertOne({
        ...normalizedData,
        timestamp: new Date()
      });
      
      // WebSocketìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ì†¡
      io.emit(`stock_${stockCode}`, normalizedData);
    }
  }
}
```

### 3. API ê²Œì´íŠ¸ì›¨ì´ (api-gateway.js)
```javascript
/**
 * ğŸšª API ê²Œì´íŠ¸ì›¨ì´
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * - ì¸ì¦ ë° ê¶Œí•œ ê²€ì¦
 * - ìš”ì²­ ë¼ìš°íŒ…
 * - ì‘ë‹µ í˜•ì‹ í‘œì¤€í™”
 * - ì—ëŸ¬ ì²˜ë¦¬
 */

class APIGateway {
  constructor() {
    this.app = express();
    this.setupMiddleware();
    this.setupRoutes();
  }

  setupMiddleware() {
    // ë³´ì•ˆ í—¤ë”
    this.app.use(helmet());
    
    // CORS ì„¤ì •
    this.app.use(cors({
      origin: process.env.ALLOWED_ORIGINS?.split(',') || ['http://localhost:3000'],
      credentials: true
    }));
    
    // Rate Limiting
    this.app.use('/api/', createRateLimit({
      windowMs: 15 * 60 * 1000, // 15ë¶„
      max: 1000 // ìµœëŒ€ 1000 ìš”ì²­
    }));
    
    // JSON íŒŒì‹±
    this.app.use(express.json({ limit: '10mb' }));
    
    // ë¡œê¹…
    this.app.use(morgan('combined'));
  }

  setupRoutes() {
    // ëª¨ë°”ì¼ ì•±ìš© API ë¼ìš°íŠ¸
    this.app.use('/api/v1/auth', require('./api/routes/auth-routes'));
    this.app.use('/api/v1/trading', require('./api/routes/trading-routes'));
    this.app.use('/api/v1/market', require('./api/routes/market-routes'));
    this.app.use('/api/v1/account', require('./api/routes/account-routes'));
    
    // ì—ëŸ¬ í•¸ë“¤ëŸ¬
    this.app.use(this.errorHandler);
  }

  errorHandler(error, req, res, next) {
    logger.error('API ì—ëŸ¬:', error);
    
    res.status(error.statusCode || 500).json({
      success: false,
      error: {
        message: error.message,
        code: error.code
      },
      timestamp: new Date().toISOString(),
      requestId: req.id
    });
  }
}
```

## ğŸ” ë³´ì•ˆ ê°•í™” ë°©ì•ˆ

### 1. API ë³´ì•ˆ
- **JWT í† í° ê¸°ë°˜ ì¸ì¦**: Access/Refresh í† í° ë¶„ë¦¬
- **API Rate Limiting**: IP/ì‚¬ìš©ìë³„ ìš”ì²­ ì œí•œ
- **ì…ë ¥ ê°’ ê²€ì¦**: Joi ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ ê²€ì¦
- **SQL Injection ë°©ì§€**: Parameterized Query ì‚¬ìš©

### 2. ë°ì´í„° ë³´ì•ˆ
- **ë¯¼ê°ì •ë³´ ì•”í˜¸í™”**: AES-256-GCMìœ¼ë¡œ ê³„ì¢Œì •ë³´ ì•”í˜¸í™”
- **í†µì‹  ì•”í˜¸í™”**: HTTPS/WSS ê°•ì œ ì‚¬ìš©
- **ë°ì´í„° ë§ˆìŠ¤í‚¹**: ë¡œê·¸ì—ì„œ ë¯¼ê°ì •ë³´ ì œê±°

### 3. ì‹œìŠ¤í…œ ë³´ì•ˆ
- **ì„œë²„ ê°•í™”**: Windows Defender, ë°©í™”ë²½ ì„¤ì •
- **ì ‘ê·¼ ì œì–´**: VPN ê¸°ë°˜ ê´€ë¦¬ì ì ‘ê·¼
- **ëª¨ë‹ˆí„°ë§**: ì‹¤ì‹œê°„ ë³´ì•ˆ ë¡œê·¸ ë¶„ì„

## ğŸ“± ëª¨ë°”ì¼ ì—°ë™ ì„¤ê³„

### RESTful API ì„¤ê³„
```javascript
// API ì—”ë“œí¬ì¸íŠ¸ êµ¬ì¡°
const API_ENDPOINTS = {
  // ì¸ì¦
  AUTH: {
    LOGIN: 'POST /api/v1/auth/login',
    LOGOUT: 'POST /api/v1/auth/logout',
    REFRESH: 'POST /api/v1/auth/refresh',
    PROFILE: 'GET /api/v1/auth/profile'
  },
  
  // ê³„ì¢Œ
  ACCOUNT: {
    BALANCE: 'GET /api/v1/account/balance',
    POSITIONS: 'GET /api/v1/account/positions',
    HISTORY: 'GET /api/v1/account/history'
  },
  
  // ë§¤ë§¤
  TRADING: {
    START: 'POST /api/v1/trading/start',
    STOP: 'POST /api/v1/trading/stop',
    STATUS: 'GET /api/v1/trading/status',
    STRATEGIES: 'GET /api/v1/trading/strategies'
  },
  
  // ì‹œì¥
  MARKET: {
    STOCKS: 'GET /api/v1/market/stocks',
    PRICE: 'GET /api/v1/market/price/:code',
    CHART: 'GET /api/v1/market/chart/:code'
  }
};
```

### WebSocket ì´ë²¤íŠ¸ ì„¤ê³„
```javascript
// ì‹¤ì‹œê°„ ì´ë²¤íŠ¸
const WS_EVENTS = {
  // í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„
  SUBSCRIBE_STOCK: 'subscribe_stock',
  UNSUBSCRIBE_STOCK: 'unsubscribe_stock',
  
  // ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸
  STOCK_PRICE_UPDATE: 'stock_price_update',
  TRADING_SIGNAL: 'trading_signal',
  ORDER_UPDATE: 'order_update',
  ACCOUNT_UPDATE: 'account_update'
};
```

## ğŸš€ ë°°í¬ ë° ìš´ì˜

### Windows ì„œë²„ í™˜ê²½
```batch
REM ê°œë°œ í™˜ê²½ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸
@echo off

echo "=== CleonAI ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ ì„¤ì¹˜ ==="

echo "1. Node.js ì„¤ì¹˜ í™•ì¸..."
node --version
npm --version

echo "2. Python ì„¤ì¹˜ í™•ì¸..."
python --version
pip --version

echo "3. MongoDB ì„¤ì¹˜ ë° ì‹¤í–‰..."
mongod --version
net start MongoDB

echo "4. Redis ì„¤ì¹˜ ë° ì‹¤í–‰..."
redis-server --version
redis-server --service-start

echo "5. í”„ë¡œì íŠ¸ ì˜ì¡´ì„± ì„¤ì¹˜..."
npm install
pip install -r requirements.txt

echo "6. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •..."
copy .env.example .env
echo "Please edit .env file with your configurations"

echo "7. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”..."
npm run db:init

echo "=== ì„¤ì¹˜ ì™„ë£Œ ==="
echo "Run 'npm start' to start the server"
```

### Docker ì»¨í…Œì´ë„ˆí™” (ì„ íƒì‚¬í•­)
```yaml
# docker-compose.yml
version: '3.8'

services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
    depends_on:
      - mongodb
      - redis
    networks:
      - trading-network

  mongodb:
    image: mongo:5.0
    ports:
      - "27017:27017"
    volumes:
      - mongodb_data:/data/db
    networks:
      - trading-network

  redis:
    image: redis:7.0
    ports:
      - "6379:6379"
    networks:
      - trading-network

volumes:
  mongodb_data:

networks:
  trading-network:
    driver: bridge
```

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### 1. ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
- **ì¸ë±ì‹±**: ìì£¼ ì¡°íšŒë˜ëŠ” í•„ë“œì— ë³µí•© ì¸ë±ìŠ¤ ìƒì„±
- **ìƒ¤ë”©**: ëŒ€ìš©ëŸ‰ ì‹œì„¸ ë°ì´í„° ë¶„ì‚° ì €ì¥
- **ìºì‹±**: Redisë¥¼ í†µí•œ ë¹ˆë²ˆí•œ ì¡°íšŒ ë°ì´í„° ìºì‹±

### 2. API ì„±ëŠ¥ ìµœì í™”
- **ì‘ë‹µ ì••ì¶•**: gzip ì••ì¶• ì ìš©
- **í˜ì´ì§€ë„¤ì´ì…˜**: ëŒ€ëŸ‰ ë°ì´í„° ì¡°íšŒ ì‹œ í˜ì´ì§• ì²˜ë¦¬
- **ë¹„ë™ê¸° ì²˜ë¦¬**: ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì€ Queue ì²˜ë¦¬

### 3. ì‹¤ì‹œê°„ ì²˜ë¦¬ ìµœì í™”
- **WebSocket í’€ë§**: ì—°ê²° í’€ ê´€ë¦¬
- **ì´ë²¤íŠ¸ ë²„í¼ë§**: ë¹ˆë²ˆí•œ ì´ë²¤íŠ¸ëŠ” ë°°ì¹˜ ì²˜ë¦¬
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ìµœì í™”

## ğŸ’° ì˜ˆìƒ ë¹„ìš© ë° ì¼ì •

### ê°œë°œ ë¹„ìš© (3ê°œì›”)
- **ê°œë°œì 1ëª…**: 800ë§Œì› Ã— 3ê°œì›” = 2,400ë§Œì›
- **ì„œë²„ ë° ì¸í”„ë¼**: 150ë§Œì›
- **ë„êµ¬ ë° ë¼ì´ì„¼ìŠ¤**: 100ë§Œì›
- **ì´ ê°œë°œë¹„**: **2,650ë§Œì›**

### ìš´ì˜ ë¹„ìš© (ì›”ê°„)
- **Windows ì„œë²„**: 50ë§Œì›/ì›”
- **ë°ì´í„°ë² ì´ìŠ¤**: 30ë§Œì›/ì›”
- **CDN ë° ë³´ì•ˆ**: 20ë§Œì›/ì›”
- **ê¸°íƒ€ ìš´ì˜ë¹„**: 15ë§Œì›/ì›”
- **ì´ ìš´ì˜ë¹„**: **115ë§Œì›/ì›”**

### ê°œë°œ ì¼ì • (16ì£¼)
- **Week 1-2**: í™˜ê²½ êµ¬ì¶• ë° ê¸°ë³¸ êµ¬ì¡° ì„¤ê³„
- **Week 3-6**: í‚¤ì›€ API ì—°ë™ ë° ë°ì´í„° ìˆ˜ì§‘
- **Week 7-10**: ìë™ë§¤ë§¤ ì—”ì§„ ê°œë°œ
- **Week 11-12**: API ì„œë²„ ë° ë³´ì•ˆ êµ¬í˜„
- **Week 13-14**: í†µí•© í…ŒìŠ¤íŠ¸ ë° ìµœì í™”
- **Week 15-16**: ë°°í¬ ë° ë¬¸ì„œí™”

---

**ì‘ì„±ì¼**: 2025ë…„ 9ì›” 22ì¼  
**ìƒíƒœ**: ì•„í‚¤í…ì²˜ ì„¤ê³„ ì™„ë£Œ  
**ë‹¤ìŒ ë‹¨ê³„**: ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ êµ¬í˜„ ì‹œì‘


